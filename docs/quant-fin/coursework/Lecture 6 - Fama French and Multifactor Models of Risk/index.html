<!DOCTYPE html>
<html lang="en"><head>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.55">

  <meta name="author" content="Lucas S. Macoris (FGV-EAESP)">
  <title>Lucas S. Macoris – Fama French and Multi-Factor Models of Risk</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-87FLN5SXEJ"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-87FLN5SXEJ', { 'anonymize_ip': true});
  </script>
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Fama French and Multi-Factor Models of Risk</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Lucas S. Macoris (FGV-EAESP) 
</div>
</div>
</div>

</section>
<section id="outline" class="slide level2">
<h2>Outline</h2>
<ul>
<li>This lecture is mainly based the following textbooks:
<ol type="1">
<li><em>Tidy Finance</em> <span class="citation" data-cites="tidyfinance">(<a href="#/references" role="doc-biblioref" onclick="">Scheuch, Voigt, and Weiss 2023</a>)</span></li>
<li><em>R for Data Science</em> <span class="citation" data-cites="r4ds">(<a href="#/references" role="doc-biblioref" onclick="">Wickham, Mine Cetinkaya-Rundel, and Grolemund 2023</a>)</span></li>
</ol></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Coding Replications</strong></p>
</div>
<div class="callout-content">
<p>For coding replications, whenever applicable, please follow <a href="https://lsmacoris.github.io/lectures/quant-fin.html">this</a> page or hover on the specific slides with containing coding chunks.</p>
<ol type="1">
<li>Ensure that you have your <span class="blue"><i class="fa-brands fa-r-project" aria-label="r-project"></i></span> session properly set-up according to the instructions outlined in the course webpage</li>
<li>In the webpage, you can also find a detailed discussion of the examples covered in this lecture</li>
</ol>
</div>
</div>
</div>
</section>
<section id="disclaimer" class="slide level2">
<h2>Disclaimer</h2>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Disclaimer</strong></p>
</div>
<div class="callout-content">
<p>The information presented in this lecture is for educational and informational purposes only and should not be construed as investment advice. Nothing discussed constitutes a recommendation to buy, sell, or hold any financial instrument or security. Investment decisions should be made based on individual research and consultation with a qualified financial professional. The presenter assumes no responsibility for any financial decisions made based on this content.</p>
<p>All code used in this lecture is publicly available and is also shared on my <a href="https://github.com/lsmacoris">GitHub</a> page. Participants are encouraged to review, modify, and use the code for their own learning and research purposes. However, no guarantees are made regarding the accuracy, completeness, or suitability of the code for any specific application.</p>
<p>For any questions or concerns, please feel free to reach out via email at <a href="mailto:lucas.macoris@fgv.br">lucas.macoris@fgv.br</a></p>
</div>
</div>
</div>
</section>
<section id="what-if-alpha-is-consistently-different-from-zero" class="slide level2">
<h2>What if <span class="math inline">\(\alpha\)</span> is consistently different from zero?</h2>
<ul>
<li>Let’s go back to our <span class="math inline">\(\alpha\)</span> definition for a given stock <span class="math inline">\(i\)</span>:</li>
</ul>
<p><span class="math display">\[
\alpha_i = E[R_i] - R_i
\]</span></p>
<ul>
<li><p>As we discussed, if you assume that <span class="blue">CAPM</span> is the correct model to explain expected returns, competition in financial markets should make <span class="math inline">\(\alpha \rightarrow 0\)</span> in equilibrium:</p>
<ol type="1">
<li>Stocks <span class="green">above</span> the SML are <span class="green">cheap</span>, so the prices should <span class="green">rise</span> (<span class="green">positive</span> alpha).</li>
<li>Stocks <span class="red">below</span> the SML are <span class="red">expensive</span>, so the prices should <span class="red">drop</span> (<span class="red">negative</span> alpha).</li>
</ol></li>
<li><p>However, over the years since the discovery of the <span class="blue">CAPM</span>, it has become increasingly clear that forming portfolios based on <em>market capitalization</em>, <em>book-to-market</em> ratios, and <em>past returns</em>, investors can construct trading strategies that have a <span class="math inline">\(\small alpha&gt;0\)</span></p></li>
<li><p><strong>Why</strong>? There can be <span class="blue">two</span> reasons why positive-alpha strategies exist in a persistent way</p></li>
</ul>
</section>
<section id="why-alpha-is-consistently-different-from-zero" class="slide level2">
<h2>Why <span class="math inline">\(\alpha\)</span> is consistently different from zero?</h2>
<div class="fragment">
<p><strong>Reason #1: Investors are systematically ignoring positive-NPV investment opportunities:</strong></p>
<ul>
<li>The <span class="blue">CAPM</span> correctly computes required risk premiums, but investors are <span class="blue">ignoring</span> opportunities to earn extra returns without bearing any extra risk</li>
<li>That could happen either because they are <span class="blue">unaware</span> of them or because the <span class="blue">costs</span> to implement the strategies are larger than the NPV of undertaking them</li>
</ul>
</div>
<div class="fragment">
<p><span class="math inline">\(\rightarrow\)</span> <em>This explanation goes straight to the hypotheses outlined by the <span class="blue">CAPM</span>!</em></p>
<ul>
<li><p>The only way a positive-NPV opportunity can persist in a market is if some barrier to entry restricts competition. Nowadays, this hypothesis seems <span class="red">unlikely</span>:</p>
<ol type="1">
<li>Information required to form the portfolios is readily available;</li>
<li>Trading costs are decreasing</li>
</ol></li>
</ul>
</div>
</section>
<section id="why-alpha-is-consistently-different-from-zero-continued" class="slide level2">
<h2>Why <span class="math inline">\(\alpha\)</span> is consistently different from zero? Continued</h2>
<p><strong>Reason #2: The positive-alpha trading strategies contain risk that investors are unwilling to bear but the CAPM does not capture:</strong></p>
<ol type="1">
<li><p>A stock’s beta with the market portfolio <em>does not</em> adequately measure a stock’s systematic risk</p></li>
<li><p>Because of that, the <span class="blue">CAPM</span> <em>does not</em> correctly compute the risk premium as it leaves out important <span class="blue">risk factors</span> that investors care about other than the market sensitivity!</p></li>
</ol>
<div class="fragment">
<ul>
<li>In other words, the positive alphas from the trading strategy are really returns for bearing risk that investors are averse to but the model <em>does not capture</em>:</li>
</ul>
<ol type="1">
<li><p>We assumed that investor would always seek for the best risk <span class="math inline">\(\times\)</span> return combination</p></li>
<li><p>However, investors may stick with inefficient portfolios because they care about risk characteristics other than the volatility of their traded portfolio. For instance, they prefer to not be exposed to the sector they work in or to specific industries (<em>i.e.</em>, ESG-based decisions)</p></li>
</ol>
</div>
</section>
<section id="moving-beyond-the-capm" class="slide level2">
<h2>Moving Beyond the CAPM</h2>
<ul>
<li>We previously defined that the required return for any given security <span class="math inline">\(i\)</span> should follow:</li>
</ul>
<p><span class="math display">\[
E[R_i] = R_f + \beta_i^P \times (E[R_P - R_f])
\]</span></p>
<ol type="1">
<li>At first, we were <em>agnostic</em> on what <span class="math inline">\(P\)</span>, the portfolio returns, should stand for</li>
<li>When we introduced the <span class="blue">CAPM</span>, we claimed that <span class="math inline">\(P=M\)</span> - <em>i.e</em>, the efficient portfolio is the market portfolio</li>
</ol>
<ul>
<li><p>However, real-world frictions points us to an uncomfortable outcome:</p>
<ol type="1">
<li>The <span class="blue">CAPM</span> assumes a single risk factor (market risk), but…</li>
<li>There is empirical evidence that shows additional factors can explain anomalies</li>
</ol></li>
</ul>
<p><span class="math inline">\(\rightarrow\)</span> <em>When the market portfolio is not efficient, we have to find a method to identify an efficient portfolio before we can use the above equation!</em></p>
</section>
<section id="size-effect" class="slide level2">
<h2>Size Effect</h2>
<ul>
<li><p><strong>Idea</strong>: <span class="green">small</span> market capitalization stocks have historically earned <span class="green">higher</span> average returns than the market portfolio, even after accounting for their higher betas</p></li>
<li><p>A way to replicate this thesis is to split stocks each year into <span class="blue">10 portfolios</span> by ranking them based on their <span class="blue">market capitalizations</span>:</p>
<ol type="1">
<li>The <span class="blue">first</span> portfolio had the <span class="blue">10% smallest</span> stocks in terms of market capitalization</li>
<li>The <span class="blue">second</span> portfolio had the <span class="blue">20% smallest</span> stocks; and so on, until…</li>
<li>The <span class="blue">tenth</span> portfolio had the <span class="blue">10% biggest</span> stocks in terms of market capitalization</li>
</ol></li>
</ul>
<div class="fragment">
<p><strong>Calculating the monthly excess returns and the beta of each decile portfolio, we see that:</strong></p>
<ol type="1">
<li>Portfolios with higher betas yield higher future returns (as expected)</li>
<li>Most portfolios were above the security market (<span class="math inline">\(\small \alpha&gt;0\)</span>)</li>
<li>The smallest deciles - <em>i.e</em>, small-cap firms - exhibit the most extreme effect</li>
</ol>
</div>
</section>
<section id="book-to-market-ratio" class="slide level2">
<h2>Book-to-Market Ratio</h2>
<ul>
<li><p>As with <em>Size</em>, a similar rationale could be applied to stocks that have higher levels of <em>Market Value of Equity</em> <em>vis-a-vis</em> their historical values (<em>Book Value of Equity</em>)</p></li>
<li><p><strong>Idea</strong>: <span class="green">small</span> market capitalization stocks have historically earned higher average returns than the market portfolio, even after accounting for their higher betas</p>
<ol type="1">
<li>High book-to-market stocks have historically earned higher average returns than low book-to-market stocks</li>
<li>Stocks with high book-to-market ratios are <em>value</em> stocks, and those with low book-to-market ratios are <em>growth</em> stocks</li>
</ol></li>
</ul>
<div class="fragment">
<p><strong>Calculating the monthly excess returns and the beta of each decile portfolio, we see that:</strong></p>
<ol type="1">
<li>In this case, <em>value</em> stocks - <em>i.e</em>, the stocks in the highest deciles - tend to present higher <span class="math inline">\(\alpha\)</span></li>
<li>As such, a strategy that goes <span class="green">long</span> on <em>value</em> stocks and <span class="red">short</span> on <em>growth</em> stocks tends to present positive <span class="math inline">\(\alpha\)</span></li>
</ol>
</div>
</section>
<section id="multifactor-models-of-risk" class="slide level2">
<h2>Multifactor Models of Risk</h2>
<ul>
<li><p>When we first introduced the <span class="blue">CAPM</span>, we implicitly assumed that there was a single portfolio (or <em>“factor”</em>) that represented the efficient portfolio: the market (a <em>“single factor”</em> portfolio)</p></li>
<li><p>However, it is not actually necessary to identify the efficient portfolio itself, as long as you identify a collection of portfolios from which the efficient portfolio can be constructed</p></li>
<li><p>A <span class="blue">Multi-Factor Model</span> is a pricing model that uses more than one portfolio (<em>“factors”</em>) to <em>approximate</em> the efficient portfolio:</p></li>
</ul>
<div class="fragment">
<p><span class="math display">\[
\small E[R_i] = R_f + \beta_i^{\text{F1}} \times \underbrace{(E[R_{\text{F1}} - R_f])}_{\text{Excess return for Factor 1}}+ \beta_i^{\text{F2}} \times \underbrace{(E[R_{\text{F2}} - R_f])}_{\text{Excess return for Factor 2}}+...+\beta_i^{\text{Fn}} \times \underbrace{(E[R_{\text{Fn}} - R_f])}_{\text{Excess return for Factor n}}
\]</span></p>
<ul>
<li>Each <span class="math inline">\(\beta_i^{n}\)</span> here is called a <span class="blue">factor beta</span>: like the CAPM, it is the expected % change in the excess return of a security for a 1% change in the excess return of that factor portfolio, holding everything else constant</li>
</ul>
</div>
</section>
<section id="multifactor-models-of-risk-continued" class="slide level2">
<h2>Multifactor Models of Risk, continued</h2>
<ul>
<li><p>The previous equation showed that that we can write the risk premium of any marketable security as the sum of the risk premium of each factor multiplied by the sensitivity of the stock with that factor:</p>
<ol type="1">
<li><span class="blue">Single-factor:</span> We use an presumably efficient portfolio, it will <em>alone</em> capture all systematic risk (for example, the <em>CAPM</em>)</li>
<li><span class="blue">Multifactor:</span> If we use multiple portfolios as factors, then <em>together</em> these factors will capture all systematic risk - this is also known as the <em>Arbitrage Pricing Theory (APT)</em></li>
</ol></li>
<li><p><strong>Multifactor models allow investors to break the risk premium down into different factors:</strong></p>
<ol type="1">
<li>As they might not be equally averse to the different factors, multifactor models allows investors to <em>tailor</em> their risk exposure</li>
<li>This idea of tailoring risk exposures based on common risk factors has become increasingly known amongst practitioners as a <span class="blue">smart beta</span> strategy - click <a href="https://institutional.fidelity.com/app/item/RD_13569_45080/factor-etfs.html">here</a> for an extensive list of factor ETFs from <em>Fidelity</em></li>
</ol></li>
</ul>
</section>
<section id="which-factors-portfolios-to-use" class="slide level2">
<h2>Which factors (portfolios) to use?</h2>
<ul>
<li><p>If investors can tailor their risk exposure to specific risk factors, then the next question is: <span class="blue">which risk factors an investor should be exposed to</span>?</p></li>
<li><p>Some important risk factors found in the previous literature include, but not limited to:</p>
<ol type="1">
<li><p><span class="blue">Market Strategy</span>: the most straightforward example is to expose to the market itself, like the CAPM did. Even if the market portfolio is not efficient, it still captures many components of systematic risk</p></li>
<li><p><span class="blue">Market Capitalization Strategy</span>: a trading strategy that each year buys portfolio S (small stocks) and finances this position by short selling portfolio B (big stocks) has produced positive risk-adjusted returns historically. This is called a <em>small-minus-big</em> <em>(SMB)</em> portfolio</p></li>
<li><p><span class="blue">Book-to-Market Strategy</span>: a trading strategy that each year buys a portfolio of <em>growth</em> stocks and finances it by selling <em>value</em> stocks. This is called a <em>high-minus-low</em> <em>(HML)</em> portfolio</p></li>
</ol></li>
</ul>
</section>
<section id="example-the-fama-french-model" class="slide level2">
<h2>Example: the Fama-French model</h2>
<ul>
<li>A direct application of the previous slide is the <span class="blue">Fama-French</span> portfolio <span class="citation" data-cites="fama1993">(<a href="#/references" role="doc-biblioref" onclick="">Fama and French 1993</a>)</span>, which considers the <span class="blue">Market</span>, the <span class="blue">Market Capitalization Strategy (<em>Size</em>)</span>, and the <span class="blue">Book-to-Market (<em>Value</em>)</span> strategy:</li>
</ul>
<p><span class="math display">\[\small E[R_i] = R_f + \beta_s^m \times \underbrace{(E[R_m]− R_f)}_{\text{Market}}  + \beta_s^{SMB} \times \underbrace{E[R_{SMB}]}_{\text{Size}} + \beta_s^{HML} \times \underbrace{E[R_{HML}]}_{\text{Market Cap.}}\]</span></p>
<ol type="1">
<li>Note that we can price the required returns for a given security <span class="math inline">\(i\)</span> according to its exposure (the <span class="math inline">\(\beta\)</span>’s) to each of the factor portfolios</li>
<li>Before, we claimed using the CAPM that only the first factor should drive required returns (<em>i.e.</em>, the market)</li>
<li>If investors also care about <em>other</em> risk factors, the exposure of a given security needs to take that into account when estimating the required returns!</li>
</ol>
</section>
<section id="application-hedge-fund-performance-evaluation" class="slide level2">
<h2>Application: Hedge Fund Performance Evaluation</h2>
<ul>
<li>One of the most widely known examples of applications using the <span class="blue">Fama-French</span> model is to assess a hedge fund’s true skill in generating excess returns:
<ol type="1">
<li>Many hedge-fund managers claim to generate excess returns (<span class="math inline">\(\alpha\)</span>)…</li>
<li>…but after adjusting for <span class="blue">Fama-French</span> factors, true skill is revealed!</li>
</ol></li>
<li>Investors can use this model to determine whether returns come from <span class="blue">skill</span> (true alpha) or simply <span class="blue">exposure</span> to common risk factors
<ol type="1">
<li>If a fund shows <span class="green">positive</span> <span class="math inline">\(\alpha\)</span> after accounting for the <span class="blue">Fama-French</span> factors, it suggests manager skill</li>
<li>If returns are fully explained by factors, performance comes from <span class="blue">risk exposure</span>, not manager’s skill</li>
</ol></li>
<li>Furthermore, investors can understand <em>how</em> exposed a given strategy is to the most common risk factors, and understand the determinants of the fund’s returns over time</li>
</ul>
</section>
<section id="hands-on-exercise" class="slide level2">
<h2>Hands-On Exercise</h2>
<ul>
<li><p>You work as a quantitative analyst at <em>Axe Capital</em>. You have been given the task of analyzing a couple of Hedge Fund strategies and assess whether they have generated true excess returns that could have been attributed to their manager’s skill:</p>
<ol type="1">
<li>What is the historical performance of each strategy over time?</li>
<li>Which strategies, according to the <span class="blue">CAPM</span> model, have generated <span class="math inline">\(\alpha&gt;0\)</span>?</li>
<li>Which strategies, according to the <span class="blue">Fama-French</span> model, have generated <span class="math inline">\(\alpha&gt;0\)</span>?</li>
</ol></li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Specific Instructions</strong></p>
</div>
<div class="callout-content">
<ol type="1">
<li>You will be using some of the data contained in the <code>edhec</code> dataset - click <a href="https://www.rdocumentation.org/packages/PerformanceAnalytics/versions/2.0.8/topics/edhec">here</a> for a detailed explanation on the dataset.</li>
<li>Model estimation should be done at the <em>monthly</em> level</li>
</ol>
</div>
</div>
</div>
</section>
<section id="about-the-dataset" class="slide level2">
<h2>About the dataset</h2>
<ul>
<li><p>The <code>edhec</code> dataset, from the <em>EDHEC Risk and Asset Management Research Center</em>, is a dataset that covers monthly Hedge Fund returns starting from 1997</p></li>
<li><p>Each series of returns represents a Hedge Fund strategy that seeks to exploit a given type of market anomaly:</p>
<ol type="1">
<li><em>Convertible Arbitrage</em> - click <a href="https://risk.edhec.edu/conv-arb/">here</a> for details</li>
<li><em>Event Driven</em> - click <a href="https://risk.edhec.edu/event-driven/">here</a> for details</li>
<li><em>Merger Arbitrage</em> - click <a href="https://risk.edhec.edu/merger-arb/">here</a> for details</li>
<li><em>Relative Value</em> - click <a href="https://risk.edhec.edu/relative-value/">here</a> for details</li>
<li><em>Distressed Securities</em> - click <a href="https://risk.edhec.edu/dist-sec/">here</a> for details</li>
<li><em>CTA Global</em> - click <a href="https://climateimpact.edhec.edu/sites/risk/files/indices/Indices/Edhec%20Alternative%20Indices/Web/report/cta.pdf">here</a> for details</li>
</ol></li>
</ul>
</section>
<section id="step-1-loading-the-data" class="slide level2">
<h2>Step 1: Loading the data</h2>
<ul>
<li><p>The first step is to load the data on historical returns on hedge fund strategies. For that, the <code>edhec</code> dataset - provided in the <code>PerformanceAnalytics</code> package, contains the historical monthly returns for a handful of alternative global strategies</p></li>
<li><p>I have already prepped the data for you in an <code>.rds</code> file that can be downloaded using the <em>Download Data</em> button below or directly through <em>eClass®</em>. An <code>.rds</code> file is an <code>R</code> object that can be loaded directly into your <code>R</code> session</p></li>
<li><p>To load an <code>.rds</code> file, you can either double-click and open using RStudio, or run the following command:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co">#Assuming that the file is in the correct folder</span></span>
<span id="cb1-2"><a></a>hf_data<span class="ot">=</span><span class="fu">readRDS</span>(<span class="st">'hf_data.rds'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Note that the object that has been loaded is an <code>xts</code> object, which inherits several useful properties for working with time series data!</li>
</ul>
</section>
<section id="step-2-historical-performance" class="slide level2">
<h2>Step 2: Historical Performance</h2>
<ul>
<li><p>It is very easy to work with time series using the base <code>R</code> capabilities. For example, you can pass call <code>cumprod(1+x)</code> in your dataset, and <code>R</code> understands that you want to do these operations column-wise</p></li>
<li><p>Alternatively, you can use the steps from the previous lectures to get the data into a proper format for using <code>ggplot2</code></p></li>
</ul>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Code</a></li><li><a href="#tabset-1-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="co">#Apply the cumprod function to all columns</span></span>
<span id="cb2-2"><a></a><span class="fu">cumprod</span>(<span class="dv">1</span><span class="sc">+</span>hf_data)<span class="sc">-</span><span class="dv">1</span><span class="sc">%&gt;%</span><span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>           Convertible.Arbitrage CTA.Global Distressed.Securities
1997-01-01            0.01190000 0.03930000            0.01780000
1997-02-01            0.02434637 0.07027114            0.03021716
1997-03-01            0.03233627 0.06802357            0.02898090
1997-04-01            0.04121436 0.04986717            0.03206784
1997-05-01            0.05745731 0.04829237            0.05611502
1997-06-01            0.07987540 0.05720285            0.07903272
1997-07-01            0.10071700 0.11968354            0.10428208
1997-08-01            0.11546661 0.06672251            0.12051503
1997-09-01            0.12907530 0.08784362            0.15973306
1997-10-01            0.14036605 0.07718275            0.15231077
       ...                                                       
2020-08-01            3.68582245 1.94567988            4.80813414
2020-09-01            3.71065731 1.88941739            4.84821027
2020-10-01            3.74127659 1.87872655            4.83300492
2020-11-01            3.87972186 1.91471063            5.08149093
2020-12-01            3.98561183 2.04645555            5.26819270
2021-01-01            4.10875644 2.03670689            5.41800251
2021-02-01            4.20531194 2.13236316            5.62081139
2021-03-01            4.18032644 2.14645879            5.72873061
2021-04-01            4.17980841 2.22512026            5.87407120
2021-05-01            4.20881533 2.27801223            5.98955559
           Emerging.Markets Equity.Market.Neutral Event.Driven
1997-01-01        0.0791000            0.01890000   0.02130000
1997-02-01        0.1357527            0.02919089   0.02987892
1997-03-01        0.1221237            0.03083760   0.02751020
1997-04-01        0.1354770            0.04310456   0.02699644
1997-05-01        0.1712445            0.06281924   0.06253052
1997-06-01        0.2392938            0.08035576   0.08994381
1997-07-01        0.3086943            0.10704054   0.12340508
1997-08-01        0.3000569            0.10892251   0.13138126
1997-09-01        0.3298282            0.13132275   0.16860370
1997-10-01        0.2537620            0.14207031   0.17573218
       ...                                                    
2020-08-01        4.2056980            2.33237019   4.34054821
2020-09-01        4.1296948            2.32570545   4.34161632
2020-10-01        4.1163576            2.31073977   4.35443620
2020-11-01        4.4069667            2.32166521   4.71104165
2020-12-01        4.6524430            2.37149019   4.96860963
2021-01-01        4.7683181            2.37250164   5.06888227
2021-02-01        4.8617648            2.41937941   5.29464469
2021-03-01        4.8142846            2.45425708   5.39535901
2021-04-01        4.9637117            2.50503466   5.57187092
2021-05-01        5.0883532            2.51730228   5.65401930</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-2-historical-performance-1" class="slide level2">
<h2>Step 2: Historical Performance</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">Code</a></li><li><a href="#tabset-2-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>(<span class="fu">cumprod</span>(<span class="dv">1</span><span class="sc">+</span>hf_data)<span class="sc">-</span><span class="dv">1</span>)<span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a></a>  <span class="fu">rownames_to_column</span>(<span class="st">'date'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a></a>  <span class="fu">mutate</span>(<span class="at">date=</span><span class="fu">as.Date</span>(date))<span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">names_to=</span><span class="st">'strategy'</span>,<span class="at">values_to =</span> <span class="st">'cum_return'</span>,<span class="at">cols=</span><span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>)<span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>date,<span class="at">y=</span>cum_return,<span class="at">group=</span>strategy,<span class="at">col=</span>strategy))<span class="sc">+</span></span>
<span id="cb4-7"><a></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb4-8"><a></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">'years'</span>,<span class="at">date_labels=</span><span class="st">'%Y'</span>)<span class="sc">+</span></span>
<span id="cb4-9"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> percent)<span class="sc">+</span></span>
<span id="cb4-10"><a></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Comparison of hedge fund global strategies over time'</span>,</span>
<span id="cb4-11"><a></a>       <span class="at">subtitle=</span><span class="st">'Considering EDHEC dataset of monthly hedge fund returns.'</span>,</span>
<span id="cb4-12"><a></a>       <span class="at">col=</span><span class="st">'Strategy'</span>,</span>
<span id="cb4-13"><a></a>       <span class="at">x=</span><span class="st">''</span>,</span>
<span id="cb4-14"><a></a>       <span class="at">y=</span><span class="st">'Cumulative Return'</span>)<span class="sc">+</span></span>
<span id="cb4-15"><a></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb4-16"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">'bottom'</span>,</span>
<span id="cb4-17"><a></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>),</span>
<span id="cb4-18"><a></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">'bold'</span>,<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb4-19"><a></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">'bold'</span>,<span class="at">size=</span><span class="dv">15</span>),</span>
<span id="cb4-20"><a></a>        <span class="at">plot.subtitle  =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-6-1.png" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-3-analyzing-performance-determinants" class="slide level2">
<h2>Step 3: Analyzing performance determinants</h2>
<ul>
<li>Assessing the performance of a given strategy <span class="math inline">\(i\)</span> can be done by estimating:</li>
</ul>
<p><span class="math display">\[
R_{i,t}=\alpha + \sum\beta_z R_{z,t}+\varepsilon_{i,t}
\]</span> where:</p>
<ol type="1">
<li><span class="math inline">\(R_{i,t}\)</span> is the return of a given manager <span class="math inline">\(i\)</span> in month <span class="math inline">\(t\)</span></li>
<li><span class="math inline">\(R_{i,t}\)</span> is the return of a given factor portfolio <span class="math inline">\(z\)</span> in month <span class="math inline">\(t\)</span></li>
</ol>
<ul>
<li>An OLS regression as described above yields <span class="blue">two</span> important components:
<ol type="1">
<li>The estimated <span class="blue"><span class="math inline">\(\beta_z\)</span>’s</span> are the factor returns, and represent exposure of <span class="math inline">\(i\)</span> to a given risk factor</li>
<li>The estimated <span class="blue"><span class="math inline">\(\alpha\)</span></span> is the return that could not be attributed to any other risk factor, and it is thus understood as the manager’s true skill return</li>
</ol></li>
</ul>
</section>
<section id="step-3-analyzing-performance-determinants-continued" class="slide level2">
<h2>Step 3: Analyzing performance determinants, continued</h2>
<ul>
<li><p>Our <code>hf_data</code> contains information regarding all Hedge Fund Returns. Where to find information regarding factor portfolio returns?</p>
<ol type="1">
<li>Luckily, you don’t need to manually create them - there are a couple ways by which you can download historical data on factor portfolio returns</li>
<li>In <em>Kenneth French</em>’s <a href="https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html">website</a>, you will find historical factor portfolio returns for a variety of economies including the U.S., Developed Economies, Emerging Markets, and Global</li>
<li>In special, we will be collect monthly factor portfolio returns regarding the three-factor model as in <span class="citation" data-cites="fama1993">(<a href="#/references" role="doc-biblioref" onclick="">Fama and French 1993</a>)</span></li>
</ol></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="co">#This is the URl where the Factor Portfolio Returns are stored (US)</span></span>
<span id="cb5-2"><a></a>FF_url <span class="ot">&lt;-</span> <span class="st">"https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors.CSV"</span></span>
<span id="cb5-3"><a></a></span>
<span id="cb5-4"><a></a><span class="co">#Download the file, adjust names and Date, input missing information, and transform to numeric</span></span>
<span id="cb5-5"><a></a>FF_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(FF_url, <span class="at">skip =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">'date'</span>,<span class="st">'MKT_MINUS_RF'</span>,<span class="st">'SMB'</span>,<span class="st">'HML'</span>,<span class="st">'RF'</span>))<span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">ymd</span>(<span class="fu">paste0</span>(<span class="fu">substr</span>(date, <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"-"</span>, <span class="fu">substr</span>(date, <span class="dv">5</span>, <span class="dv">6</span>), <span class="st">"-01"</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb5-8"><a></a>  <span class="fu">na.locf</span>()<span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>,<span class="cf">function</span>(x) <span class="fu">as.numeric</span>(x)<span class="sc">/</span><span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-3-analyzing-performance-determinants-continued-1" class="slide level2">
<h2>Step 3: Analyzing performance determinants, continued</h2>
<ul>
<li>We will now manipulate the data in order to merge both <code>hf_data</code> and the <code>FF_data</code></li>
</ul>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">Code</a></li><li><a href="#tabset-3-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="co">#Convert the hf_data to a data.frame object and adjust columns</span></span>
<span id="cb6-2"><a></a> hf_data <span class="ot">=</span> hf_data <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a></a>  <span class="fu">rownames_to_column</span>(<span class="st">'date'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a></a>  <span class="fu">mutate</span>(<span class="at">date=</span><span class="fu">as.Date</span>(date))</span>
<span id="cb6-6"><a></a></span>
<span id="cb6-7"><a></a><span class="co">#Merge both datasets by date</span></span>
<span id="cb6-8"><a></a>merged_df <span class="ot">&lt;-</span> hf_data<span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a></a>  <span class="co">#Merge</span></span>
<span id="cb6-10"><a></a>  <span class="fu">left_join</span>(FF_data, <span class="at">by =</span> <span class="st">"date"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a></a>  <span class="co">#Pivot the data for each strategy</span></span>
<span id="cb6-12"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(date, MKT_MINUS_RF, SMB, HML, RF), <span class="at">names_to =</span> <span class="st">"strategy"</span>, <span class="at">values_to =</span> <span class="st">"return"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a></a>  <span class="fu">mutate</span>(<span class="at">excess_return =</span> return <span class="sc">-</span> RF)  <span class="co"># Convert RF to decimal format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,890 × 8
   date       MKT_MINUS_RF     SMB     HML     RF strategy  return excess_return
   &lt;date&gt;            &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;         &lt;dbl&gt;
 1 1997-01-01       0.0499 -0.0195 -0.0142 0.0045 Converti… 0.0119        0.0074
 2 1997-01-01       0.0499 -0.0195 -0.0142 0.0045 CTA Glob… 0.0393        0.0348
 3 1997-01-01       0.0499 -0.0195 -0.0142 0.0045 Distress… 0.0178        0.0133
 4 1997-01-01       0.0499 -0.0195 -0.0142 0.0045 Emerging… 0.0791        0.0746
 5 1997-01-01       0.0499 -0.0195 -0.0142 0.0045 Equity M… 0.0189        0.0144
 6 1997-01-01       0.0499 -0.0195 -0.0142 0.0045 Event Dr… 0.0213        0.0168
 7 1997-02-01      -0.0049 -0.0322  0.0567 0.0039 Converti… 0.0123        0.0084
 8 1997-02-01      -0.0049 -0.0322  0.0567 0.0039 CTA Glob… 0.0298        0.0259
 9 1997-02-01      -0.0049 -0.0322  0.0567 0.0039 Distress… 0.0122        0.0083
10 1997-02-01      -0.0049 -0.0322  0.0567 0.0039 Emerging… 0.0525        0.0486
# ℹ 1,880 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-3-the-capm-model" class="slide level2">
<h2>Step 3: The CAPM Model</h2>
<ul>
<li>We will start by analyzing of a given strategy <span class="math inline">\(i\)</span> can be done estimating a <span class="blue">CAPM</span> model</li>
<li>In this model, the only risk factor is the <em>market</em>:</li>
</ul>
<p><span class="math display">\[
(R_{i,t}-R_{f,t})=\alpha + \beta \times (R_{m,t}-R_{f,t})+\varepsilon_{i,t}
\]</span> where:</p>
<ol type="1">
<li><span class="math inline">\(R_{i,t}\)</span> is the return of a given manager <span class="math inline">\(i\)</span> in month <span class="math inline">\(t\)</span></li>
<li><span class="math inline">\(R_{m,t}\)</span> is the market return in month <span class="math inline">\(t\)</span></li>
<li><span class="math inline">\(R_{f,t}\)</span> is the risk-free return in month <span class="math inline">\(t\)</span></li>
</ol>
<ul>
<li>In what follows, we will be estimating and interpreting the CAPM results for each strategy</li>
</ul>
</section>
<section id="step-3-the-capm-model-one-strategy-output" class="slide level2">
<h2>Step 3: The CAPM model, one strategy output</h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Code</a></li><li><a href="#tabset-4-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>strategy_name <span class="ot">=</span> <span class="st">'Convertible Arbitrage'</span></span>
<span id="cb8-2"><a></a><span class="co">#Get the filtered data</span></span>
<span id="cb8-3"><a></a>filtered_data <span class="ot">=</span> merged_df<span class="sc">%&gt;%</span><span class="fu">filter</span>(strategy<span class="sc">==</span>strategy_name)</span>
<span id="cb8-4"><a></a><span class="co">#Estimate the Model</span></span>
<span id="cb8-5"><a></a>model<span class="ot">=</span><span class="fu">lm</span>(excess_return <span class="sc">~</span> MKT_MINUS_RF, <span class="at">data =</span> filtered_data)</span>
<span id="cb8-6"><a></a><span class="co">#Visualize</span></span>
<span id="cb8-7"><a></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = excess_return ~ MKT_MINUS_RF, data = filtered_data)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.113929 -0.004806  0.000581  0.006432  0.052478 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.0030327  0.0009526   3.184   0.0016 ** 
MKT_MINUS_RF 0.0789553  0.0137361   5.748 2.15e-08 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01659 on 312 degrees of freedom
  (1 observation deleted due to missingness)
Multiple R-squared:  0.09576,   Adjusted R-squared:  0.09286 
F-statistic: 33.04 on 1 and 312 DF,  p-value: 2.149e-08</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-3-the-capm-model-all-strategies" class="slide level2">
<h2>Step 3: The CAPM model, all strategies</h2>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">For-loop</a></li><li><a href="#tabset-5-2">Functional Programming</a></li><li><a href="#tabset-5-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co">#Initially an empy data frame</span></span>
<span id="cb10-2"><a></a>CAPM_results <span class="ot">=</span> <span class="fu">data.frame</span>()</span>
<span id="cb10-3"><a></a><span class="co">#Get all possible strategies</span></span>
<span id="cb10-4"><a></a>strategy_names <span class="ot">=</span> <span class="fu">names</span>(hf_data)[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb10-5"><a></a></span>
<span id="cb10-6"><a></a><span class="co">#For each i in strategy names:</span></span>
<span id="cb10-7"><a></a><span class="cf">for</span>(i <span class="cf">in</span> strategy_names){</span>
<span id="cb10-8"><a></a>  <span class="co">#Get the filtered data</span></span>
<span id="cb10-9"><a></a>  filtered_data <span class="ot">=</span> merged_df<span class="sc">%&gt;%</span><span class="fu">filter</span>(strategy<span class="sc">==</span>i)</span>
<span id="cb10-10"><a></a>  <span class="co">#Estimate the Model</span></span>
<span id="cb10-11"><a></a>  model<span class="ot">=</span><span class="fu">lm</span>(excess_return <span class="sc">~</span> MKT_MINUS_RF, <span class="at">data =</span> filtered_data)</span>
<span id="cb10-12"><a></a>  <span class="co">#Extract Coefficients applying the tidy() function</span></span>
<span id="cb10-13"><a></a>  model_tidy<span class="ot">=</span>model<span class="sc">%&gt;%</span><span class="fu">tidy</span>()<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">strategy=</span>i)</span>
<span id="cb10-14"><a></a>  <span class="co">#Append</span></span>
<span id="cb10-15"><a></a>  CAPM_results<span class="ot">=</span>CAPM_results<span class="sc">%&gt;%</span><span class="fu">rbind</span>(model_tidy)</span>
<span id="cb10-16"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>CAPM_results <span class="ot">&lt;-</span> merged_df<span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a></a>  <span class="co">#Group by strategy</span></span>
<span id="cb11-3"><a></a>  <span class="fu">group_by</span>(strategy)<span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a></a>  <span class="co">#Nest the data</span></span>
<span id="cb11-5"><a></a>  <span class="fu">nest</span>()<span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a></a>  <span class="co">#For each nest, map the lm() function and the tidy function</span></span>
<span id="cb11-7"><a></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(excess_return <span class="sc">~</span> MKT_MINUS_RF, <span class="at">data =</span> .)),</span>
<span id="cb11-8"><a></a>         <span class="at">results =</span> <span class="fu">map</span>(model, tidy)) <span class="sc">%&gt;%</span></span>
<span id="cb11-9"><a></a>  <span class="co">#Unnest the results</span></span>
<span id="cb11-10"><a></a>  <span class="fu">unnest</span>(results)<span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a></a>  <span class="co">#Select the desired columns</span></span>
<span id="cb11-12"><a></a>  <span class="fu">select</span>(strategy, term, estimate, std.error, p.value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-3">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 5
# Groups:   strategy [6]
   strategy              term         estimate std.error  p.value
   &lt;chr&gt;                 &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 Convertible Arbitrage (Intercept)   0.00303  0.000953 1.60e- 3
 2 Convertible Arbitrage MKT_MINUS_RF  0.0790   0.0137   2.15e- 8
 3 CTA Global            (Intercept)   0.00256  0.00135  5.77e- 2
 4 CTA Global            MKT_MINUS_RF  0.0394   0.0194   4.30e- 2
 5 Distressed Securities (Intercept)   0.00352  0.00104  8.09e- 4
 6 Distressed Securities MKT_MINUS_RF  0.119    0.0150   3.93e-14
 7 Emerging Markets      (Intercept)   0.00261  0.00169  1.25e- 1
 8 Emerging Markets      MKT_MINUS_RF  0.237    0.0244   1.30e-19
 9 Equity Market Neutral (Intercept)   0.00159  0.000501 1.65e- 3
10 Equity Market Neutral MKT_MINUS_RF  0.0453   0.00723  1.25e- 9
11 Event Driven          (Intercept)   0.00354  0.00111  1.55e- 3
12 Event Driven          MKT_MINUS_RF  0.154    0.0160   2.06e-19</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-3-which-strategies-generate-positive-alpha" class="slide level2">
<h2>Step 3: which strategies generate positive alpha?</h2>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">Code</a></li><li><a href="#tabset-6-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>CAPM_results <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a></a>  <span class="fu">filter</span>(term<span class="sc">==</span><span class="st">'(Intercept)'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a></a>  <span class="fu">mutate</span>(<span class="at">stat_sig=</span><span class="fu">ifelse</span>(p.value<span class="sc">&lt;</span><span class="fl">0.10</span>,<span class="st">'Statistically sig. at 10%'</span>,<span class="st">'Not statistically sig. at 10%'</span>))<span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(strategy,<span class="fu">desc</span>(estimate)),<span class="at">y=</span>estimate,<span class="at">fill=</span>stat_sig))<span class="sc">+</span></span>
<span id="cb13-5"><a></a>  <span class="fu">geom_col</span>(<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb13-6"><a></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">percent</span>(estimate,<span class="at">accuracy=</span><span class="fl">0.01</span>),<span class="at">vjust=</span><span class="sc">-</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb13-7"><a></a>  <span class="co">#Annotations</span></span>
<span id="cb13-8"><a></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Which strategies did generate positive and statistically significant alphas?'</span>,</span>
<span id="cb13-9"><a></a>       <span class="at">subtitle =</span> <span class="st">'Using the CAPM model with monthly return data.'</span>,</span>
<span id="cb13-10"><a></a>       <span class="at">x =</span> <span class="st">'Strategy'</span>,</span>
<span id="cb13-11"><a></a>       <span class="at">y =</span> <span class="st">'Alpha (%)'</span>,</span>
<span id="cb13-12"><a></a>       <span class="at">fill =</span> <span class="st">'Stat. Sig'</span>)<span class="sc">+</span></span>
<span id="cb13-13"><a></a>  <span class="co">#Scales</span></span>
<span id="cb13-14"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> percent)<span class="sc">+</span></span>
<span id="cb13-15"><a></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">'darkred'</span>,<span class="st">'darkgreen'</span>))<span class="sc">+</span></span>
<span id="cb13-16"><a></a>  <span class="co">#Custom theme minimal</span></span>
<span id="cb13-17"><a></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb13-18"><a></a>  <span class="co">#Adding further customizations</span></span>
<span id="cb13-19"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'bottom'</span>,</span>
<span id="cb13-20"><a></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">'bold'</span>,<span class="at">size=</span><span class="dv">15</span>),</span>
<span id="cb13-21"><a></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb13-22"><a></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>,<span class="at">face=</span><span class="st">'bold'</span>),</span>
<span id="cb13-23"><a></a>        <span class="at">plot.subtitle  =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-16-1.png" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-4-the-fama-french-model" class="slide level2">
<h2>Step 4: The Fama-French Model</h2>
<ul>
<li>Using the <span class="blue">CAPM</span> as our model for expected returns, 5 out of 6 strategies did deliver <span class="green">positive</span> alphas in the study period</li>
<li>We can now extend the same rationale to adopt the <span class="blue">Fama-French three-factor model</span>, which considers the <span class="blue">Market</span>, the <span class="blue">Market Capitalization Strategy (<em>Size</em>)</span>, and the <span class="blue">Book-to-Market (<em>Value</em>)</span> strategy:</li>
</ul>
<p><span class="math display">\[
\small E[R_i] = R_f + \beta_s^m \times \underbrace{(E[R_m]− R_f)}_{\text{Market}}  + \beta_s^{SMB} \times \underbrace{E[R_{SMB}]}_{\text{Size}} + \beta_s^{HML} \times \underbrace{E[R_{HML}]}_{\text{Market Cap.}}
\]</span> - As before, we will start analyzing the output for one individual strategy individually and then apply the same rationale to replicate the result across all strategies</p>
</section>
<section id="step-4-the-fama-french-model-one-strategy-output" class="slide level2">
<h2>Step 4: The Fama-French model, one strategy output</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Code</a></li><li><a href="#tabset-7-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>strategy_name <span class="ot">=</span> <span class="st">'Convertible Arbitrage'</span></span>
<span id="cb14-2"><a></a><span class="co">#Get the filtered data</span></span>
<span id="cb14-3"><a></a>filtered_data <span class="ot">=</span> merged_df<span class="sc">%&gt;%</span><span class="fu">filter</span>(strategy<span class="sc">==</span>strategy_name)</span>
<span id="cb14-4"><a></a><span class="co">#Estimate the Model</span></span>
<span id="cb14-5"><a></a>model<span class="ot">=</span><span class="fu">lm</span>(excess_return <span class="sc">~</span> MKT_MINUS_RF <span class="sc">+</span> HML <span class="sc">+</span> SMB, <span class="at">data =</span> filtered_data)</span>
<span id="cb14-6"><a></a><span class="co">#Visualize</span></span>
<span id="cb14-7"><a></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-2">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = excess_return ~ MKT_MINUS_RF + HML + SMB, data = filtered_data)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.113696 -0.004617  0.000611  0.006493  0.053374 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   0.0030400  0.0009565   3.178  0.00163 ** 
MKT_MINUS_RF  0.0809064  0.0142876   5.663  3.4e-08 ***
HML           0.0065289  0.0183442   0.356  0.72215    
SMB          -0.0094793  0.0239824  -0.395  0.69292    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01663 on 310 degrees of freedom
  (1 observation deleted due to missingness)
Multiple R-squared:  0.09661,   Adjusted R-squared:  0.08787 
F-statistic: 11.05 on 3 and 310 DF,  p-value: 6.517e-07</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-4-the-fama-french-model-all-strategies" class="slide level2">
<h2>Step 4: The Fama-French model, all strategies</h2>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">For-loop</a></li><li><a href="#tabset-8-2">Functional Programming</a></li><li><a href="#tabset-8-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="co">#Initially an empy data frame</span></span>
<span id="cb16-2"><a></a>FF_results <span class="ot">=</span> <span class="fu">data.frame</span>()</span>
<span id="cb16-3"><a></a><span class="co">#Get all possible strategies</span></span>
<span id="cb16-4"><a></a>strategy_names <span class="ot">=</span> <span class="fu">names</span>(hf_data)[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>]</span>
<span id="cb16-5"><a></a></span>
<span id="cb16-6"><a></a><span class="co">#For each i in strategy names:</span></span>
<span id="cb16-7"><a></a><span class="cf">for</span>(i <span class="cf">in</span> strategy_names){</span>
<span id="cb16-8"><a></a>  <span class="co">#Get the filtered data</span></span>
<span id="cb16-9"><a></a>  filtered_data <span class="ot">=</span> merged_df<span class="sc">%&gt;%</span><span class="fu">filter</span>(strategy<span class="sc">==</span>i)</span>
<span id="cb16-10"><a></a>  <span class="co">#Estimate the Model</span></span>
<span id="cb16-11"><a></a>  model<span class="ot">=</span><span class="fu">lm</span>(excess_return <span class="sc">~</span> MKT_MINUS_RF <span class="sc">+</span> HML <span class="sc">+</span> SMB, <span class="at">data =</span> filtered_data)</span>
<span id="cb16-12"><a></a>  <span class="co">#Extract Coefficients applying the tidy() function</span></span>
<span id="cb16-13"><a></a>  model_tidy<span class="ot">=</span>model<span class="sc">%&gt;%</span><span class="fu">tidy</span>()<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">strategy=</span>i)</span>
<span id="cb16-14"><a></a>  <span class="co">#Append</span></span>
<span id="cb16-15"><a></a>  FF_results<span class="ot">=</span>FF_results<span class="sc">%&gt;%</span><span class="fu">rbind</span>(model_tidy)</span>
<span id="cb16-16"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>FF_results <span class="ot">&lt;-</span> merged_df<span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a></a>  <span class="co">#Group by strategy</span></span>
<span id="cb17-3"><a></a>  <span class="fu">group_by</span>(strategy)<span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a></a>  <span class="co">#Nest the data</span></span>
<span id="cb17-5"><a></a>  <span class="fu">nest</span>()<span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a></a>  <span class="co">#For each nest, map the lm() function and the tidy function</span></span>
<span id="cb17-7"><a></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(excess_return <span class="sc">~</span> MKT_MINUS_RF <span class="sc">+</span> HML <span class="sc">+</span> SMB, <span class="at">data =</span> .)),</span>
<span id="cb17-8"><a></a>         <span class="at">results =</span> <span class="fu">map</span>(model, tidy)) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a></a>  <span class="co">#Unnest the results</span></span>
<span id="cb17-10"><a></a>  <span class="fu">unnest</span>(results)<span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a></a>  <span class="co">#Select the desired columns</span></span>
<span id="cb17-12"><a></a>  <span class="fu">select</span>(strategy, term, estimate, std.error, p.value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-3">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 5
# Groups:   strategy [6]
   strategy              term         estimate std.error  p.value
   &lt;chr&gt;                 &lt;chr&gt;           &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1 Convertible Arbitrage (Intercept)   0.00304  0.000957 1.63e- 3
 2 Convertible Arbitrage MKT_MINUS_RF  0.0809   0.0143   3.40e- 8
 3 Convertible Arbitrage HML           0.00653  0.0183   7.22e- 1
 4 Convertible Arbitrage SMB          -0.00948  0.0240   6.93e- 1
 5 CTA Global            (Intercept)   0.00271  0.00134  4.43e- 2
 6 CTA Global            MKT_MINUS_RF  0.0467   0.0201   2.06e- 2
 7 CTA Global            HML          -0.0250   0.0257   3.32e- 1
 8 CTA Global            SMB          -0.0639   0.0337   5.87e- 2
 9 Distressed Securities (Intercept)   0.00348  0.00104  9.74e- 4
10 Distressed Securities MKT_MINUS_RF  0.120    0.0156   2.11e-13
# ℹ 14 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-4-which-strategies-generate-positive-alpha" class="slide level2">
<h2>Step 4: which strategies generate positive alpha?</h2>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">Code</a></li><li><a href="#tabset-9-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>FF_results <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a></a>  <span class="fu">filter</span>(term<span class="sc">==</span><span class="st">'(Intercept)'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a></a>  <span class="fu">mutate</span>(<span class="at">stat_sig=</span><span class="fu">ifelse</span>(p.value<span class="sc">&lt;</span><span class="fl">0.10</span>,<span class="st">'Statistically sig. at 10%'</span>,<span class="st">'Not statistically sig. at 10%'</span>))<span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(strategy,<span class="fu">desc</span>(estimate)),<span class="at">y=</span>estimate,<span class="at">fill=</span>stat_sig))<span class="sc">+</span></span>
<span id="cb19-5"><a></a>  <span class="fu">geom_col</span>(<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb19-6"><a></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">percent</span>(estimate,<span class="at">accuracy=</span><span class="fl">0.01</span>),<span class="at">vjust=</span><span class="sc">-</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb19-7"><a></a>  <span class="co">#Annotations</span></span>
<span id="cb19-8"><a></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">'Which strategies did generate positive and statistically significant alphas?'</span>,</span>
<span id="cb19-9"><a></a>       <span class="at">subtitle =</span> <span class="st">'Using the Fama-French three-factor model with monthly return data.'</span>,</span>
<span id="cb19-10"><a></a>       <span class="at">x =</span> <span class="st">'Strategy'</span>,</span>
<span id="cb19-11"><a></a>       <span class="at">y =</span> <span class="st">'Alpha (%)'</span>,</span>
<span id="cb19-12"><a></a>       <span class="at">fill =</span> <span class="st">'Stat. Sig'</span>)<span class="sc">+</span></span>
<span id="cb19-13"><a></a>  <span class="co">#Scales</span></span>
<span id="cb19-14"><a></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> percent)<span class="sc">+</span></span>
<span id="cb19-15"><a></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">'darkred'</span>,<span class="st">'darkgreen'</span>))<span class="sc">+</span></span>
<span id="cb19-16"><a></a>  <span class="co">#Custom theme minimal</span></span>
<span id="cb19-17"><a></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb19-18"><a></a>  <span class="co">#Adding further customizations</span></span>
<span id="cb19-19"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'bottom'</span>,</span>
<span id="cb19-20"><a></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">face=</span><span class="st">'bold'</span>,<span class="at">size=</span><span class="dv">15</span>),</span>
<span id="cb19-21"><a></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>),</span>
<span id="cb19-22"><a></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>,<span class="at">face=</span><span class="st">'bold'</span>),</span>
<span id="cb19-23"><a></a>        <span class="at">plot.subtitle  =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">15</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-23-1.png" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-4-the-fama-french-model-attribution" class="slide level2">
<h2>Step 4: The Fama-French Model Attribution</h2>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-24-1.png" width="1152"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="performance-of-fund-managers" class="slide level2">
<h2>Performance of fund managers</h2>
<ul>
<li><p>Some piece of evidence from <span class="citation" data-cites="BDM">(<a href="#/references" role="doc-biblioref" onclick="">Berk and DeMarzo 2023</a>)</span>:</p>
<ol type="1">
<li>The average mutual fund manager can generate value (before computing trading costs and fees, <em>i.e.</em>, <em>“gross alpha”</em>)</li>
<li>The median mutual fund manager, on the other hand, destroys value</li>
<li>Only a small portion of managers are skilled enough to add value, according to this reference, in terms of <em>net alpha</em></li>
</ol></li>
<li><p>Because individual investors pay fees to fund managers, the <em>net alpha</em> is <span class="red">negative</span> - you should be better-off by putting your money on a passively-managed fund!</p></li>
<li><p>That is, on average, fund managers (<em>“active”</em> strategies) do not provide value after fees, comparing to index funds (<em>“passive strategies”</em>)</p></li>
</ul>
</section>
<section id="performance-of-fund-managers-continued" class="slide level2">
<h2>Performance of fund managers, continued</h2>
<ul>
<li><p>If fund managers are high-skilled investors, why they have a hard time adding value?</p></li>
<li><p>One reason why it might be difficult to add value is because there is a trap of liquidity:</p>
<ol type="1">
<li>If a manager is perceived as skilled, the deposits will grow, making harder to find above-average investment opportunities - that is why you see a lot of closed-end funds</li>
<li>Performance would converge to the mean, at best</li>
</ol></li>
<li><p>At the end of the day, the market is competitive and people profit following the theoretical predictions</p>
<ol type="1">
<li>Skilled managers are recompensated for their skills. They capture the economic rents associated with their skills</li>
<li>Investors are not recompensated for the skills of the managers they select - in the end, they derive little benefit, because this superior performance is captured by the manager in the form of fees</li>
</ol></li>
</ul>
</section>
<section id="extensions-to-risk-factors---the-factor-zoo" class="slide level2">
<h2>Extensions to risk factors - the <em>Factor Zoo</em></h2>
<ul>
<li><p><strong>Question:</strong> what is the gain in performance when using the <span class="blue">Fama-French</span> model relative to the <span class="blue">CAPM</span>?</p>
<ol type="1">
<li>When applied to historical data, results support the three-factor model proposed in <span class="citation" data-cites="fama1993">(<a href="#/references" role="doc-biblioref" onclick="">Fama and French 1993</a>)</span></li>
<li><span class="blue">Fama-French</span> explains over <span class="math inline">\(\small90\%\)</span> of the diversified portfolios returns, compared with the average <span class="math inline">\(\small70\%\)</span> given by the <span class="blue">CAPM</span> (in-sample performance)</li>
</ol></li>
</ul>
<div class="fragment">
<ul>
<li><strong>Importantly, there is a growing number of proposed factors in the Asset Pricing literature - a non-exhaustive list includes:</strong>
<ol type="1">
<li><span class="citation" data-cites="carhart1997">(<a href="#/references" role="doc-biblioref" onclick="">Carhart 1997</a>)</span> extend the <span class="blue">Fama-French</span> 3-factor model by adding a <em>momentum</em> factor</li>
<li><span class="citation" data-cites="fama2015">(<a href="#/references" role="doc-biblioref" onclick="">Fama and French 2015</a>)</span> extend the <span class="blue">Fama-French</span> 3-factor model by incorporating <em>profitability</em> and <em>investment</em></li>
<li><span class="citation" data-cites="asness2013">(<a href="#/references" role="doc-biblioref" onclick="">Asness, Frazzini, and Pedersen 2013</a>)</span> discuss the role of <em>quality</em> in asset returns</li>
</ol></li>
</ul>
</div>
</section>
<section id="extensions-to-risk-factors---the-factor-zoo-continued" class="slide level2">
<h2>Extensions to risk factors - the <em>Factor Zoo</em>, continued</h2>
<ul>
<li><p>All in all, there is a growing number of <em>risk factors</em> that have been documented in the Asset Pricing literature. Such proliferation of risk factors in the literature has been widely known as the <span class="blue"><em>“Factor Zoo”</em></span> <span class="citation" data-cites="cochrane2011">(<a href="#/references" role="doc-biblioref" onclick="">Cochrane 2011</a>)</span></p></li>
<li><p>Many factors lack theoretical justification or robustness, highlighting the role of replication and out-of-sample validation in factor research:</p>
<ol type="1">
<li><span class="citation" data-cites="novy-marx2013">(<a href="#/references" role="doc-biblioref" onclick="">Novy-Marx 2013</a>)</span> show that controlling for gross profitability explains most market anomalies and a wide range of seemingly unrelated profitable trading strategies</li>
<li><span class="citation" data-cites="hou2015">(<a href="#/references" role="doc-biblioref" onclick="">Hou, Xue, and Zhang 2015</a>)</span> shows that a model using <em>market</em>, <em>size</em>, <em>investment</em>, and <em>profitability</em> factors argely summarizes the cross section of average stock returns. A comprehensive examination of nearly 80 anomalies reveals that about one-half of the anomalies are insignificant in the broad cross section</li>
<li><span class="citation" data-cites="harvey2016">(<a href="#/references" role="doc-biblioref" onclick="">Harvey, Liu, and Zhu 2016</a>)</span> highlight issues with data mining and <em>p-hacking</em></li>
</ol></li>
</ul>
</section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>

<div class="quarto-auto-generated-content">
<p><img src="Images/logo.jpg" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://lsmacoris.github.io/">@ Website</a> | <a href="https://lsmacoris.github.io/lectures/quant-fin">@ Slides</a> | <a href="https://calendly.com/lucas-macoris-fgv/appointment-lsm">@ Office-hour appointments</a></p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-asness2013" class="csl-entry" role="listitem">
Asness, Clifford S., Andrea Frazzini, and Lasse Heje Pedersen. 2013. <span>“Quality Minus Junk.”</span> <em>AQR Capital Management Working Paper</em>.
</div>
<div id="ref-BDM" class="csl-entry" role="listitem">
Berk, J., and P. DeMarzo. 2023. <em>Corporate Finance, Global Edition</em>. Pearson. <a href="https://books.google.com.br/books?id=m78oEAAAQBAJ">https://books.google.com.br/books?id=m78oEAAAQBAJ</a>.
</div>
<div id="ref-carhart1997" class="csl-entry" role="listitem">
Carhart, Mark M. 1997. <span>“On Persistence in Mutual Fund Performance.”</span> <em>The Journal of Finance</em> 52 (1): 57–82. <a href="https://doi.org/10.1111/j.1540-6261.1997.tb03808.x">https://doi.org/10.1111/j.1540-6261.1997.tb03808.x</a>.
</div>
<div id="ref-cochrane2011" class="csl-entry" role="listitem">
Cochrane, John H. 2011. <span>“Presidential Address: Discount Rates.”</span> <em>The Journal of Finance</em> 66 (4): 1047–1108.
</div>
<div id="ref-fama1993" class="csl-entry" role="listitem">
Fama, Eugene F., and Kenneth R. French. 1993. <span>“Common Risk Factors in the Returns on Stocks and Bonds.”</span> <em>Journal of Financial Economics</em> 33 (1): 3–56.
</div>
<div id="ref-fama2015" class="csl-entry" role="listitem">
———. 2015. <span>“A Five-Factor Asset Pricing Model.”</span> <em>Journal of Financial Economics</em> 116 (1): 1–22.
</div>
<div id="ref-harvey2016" class="csl-entry" role="listitem">
Harvey, Campbell R., Yan Liu, and Heqing Zhu. 2016<span>“...and the Cross-Section of Expected Returns.”</span> <em>The Review of Financial Studies</em> 29 (1): 5–68.
</div>
<div id="ref-hou2015" class="csl-entry" role="listitem">
Hou, Kewei, Chen Xue, and Lu Zhang. 2015. <span>“Digesting Anomalies: An Investment Approach.”</span> <em>The Review of Financial Studies</em> 28 (3): 650–705.
</div>
<div id="ref-novy-marx2013" class="csl-entry" role="listitem">
Novy-Marx, Robert. 2013. <span>“The Other Side of Value: The Gross Profitability Premium.”</span> <em>Journal of Financial Economics</em> 108 (1): 1–28.
</div>
<div id="ref-tidyfinance" class="csl-entry" role="listitem">
Scheuch, Christoph, Stefan Voigt, and Patrick Weiss. 2023. <em>Tidy Finance with <span>R</span></em>. Chapman &amp; Hall/CRC. <a href="https://www.tidy-finance.org/r/">https://www.tidy-finance.org/r/</a>.
</div>
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Cetinkaya-Rundel, and Garrett Grolemund. 2023. <em><span>R</span> for Data Science</em>. O’Reilly Media. <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/lsmacoris\.github\.io\/lectures");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>