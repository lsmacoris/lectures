<!DOCTYPE html>
<html lang="en"><head>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.55">

  <meta name="author" content="Lucas S. Macoris (FGV-EAESP)">
  <title>Lucas S. Macoris â€“ Equity Valuation and Simulation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../../../site_libs/revealjs/dist/theme/quarto.css">
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-87FLN5SXEJ"></script>

  <script type="text/javascript">

  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-87FLN5SXEJ', { 'anonymize_ip': true});
  </script>
  <link href="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Equity Valuation and Simulation</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Lucas S. Macoris (FGV-EAESP) 
</div>
</div>
</div>

</section>
<section id="outline" class="slide level2">
<h2>Outline</h2>
<ul>
<li>This lecture is mainly based the following textbooks:
<ol type="1">
<li><em>Tidy Finance</em> <span class="citation" data-cites="tidyfinance">(<a href="#/references" role="doc-biblioref" onclick="">Scheuch, Voigt, and Weiss 2023</a>)</span></li>
<li><em>R for Data Science</em> <span class="citation" data-cites="r4ds">(<a href="#/references" role="doc-biblioref" onclick="">Wickham, Mine Cetinkaya-Rundel, and Grolemund 2023</a>)</span></li>
</ol></li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Coding Replications</strong></p>
</div>
<div class="callout-content">
<p>For coding replications, whenever applicable, please follow <a href="https://lsmacoris.github.io/lectures/quant-fin.html">this</a> page or hover on the specific slides with containing coding chunks.</p>
<ol type="1">
<li>Ensure that you have your <span class="blue"><i class="fa-brands fa-r-project" aria-label="r-project"></i></span> session properly set-up according to the instructions outlined in the course webpage</li>
<li>In the webpage, you can also find a detailed discussion of the examples covered in this lecture</li>
</ol>
</div>
</div>
</div>
</section>
<section id="disclaimer" class="slide level2">
<h2>Disclaimer</h2>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Disclaimer</strong></p>
</div>
<div class="callout-content">
<p>The information presented in this lecture is for educational and informational purposes only and should not be construed as investment advice. Nothing discussed constitutes a recommendation to buy, sell, or hold any financial instrument or security. Investment decisions should be made based on individual research and consultation with a qualified financial professional. The presenter assumes no responsibility for any financial decisions made based on this content.</p>
<p>All code used in this lecture is publicly available and is also shared on my <a href="https://github.com/lsmacoris">GitHub</a> page. Participants are encouraged to review, modify, and use the code for their own learning and research purposes. However, no guarantees are made regarding the accuracy, completeness, or suitability of the code for any specific application.</p>
<p>For any questions or concerns, please feel free to reach out via email at <a href="mailto:lucas.macoris@fgv.br">lucas.macoris@fgv.br</a></p>
</div>
</div>
</div>
</section>
<section id="dealing-with-uncertainty-in-valuation-models" class="slide level2">
<h2>Dealing with Uncertainty in Valuation Models</h2>
<ul>
<li>Traditional valuation methods (<em>e.g.</em>, <span class="blue">Discounted Cash Flow</span>) rely on <span class="blue">single-point estimates</span>:
<ol type="1">
<li>We assume a given level of revenue growthâ€¦</li>
<li>We also fix the appropriate discount rates, <span class="math inline">\(r\)</span>, over timeâ€¦</li>
<li>Finally, we come up with assumptions regarding the firmâ€™s <span class="blue">Terminal Value</span> (<em>i.e</em>, the perpetuity value)!</li>
</ol></li>
<li>Note, however, that these estimates are subject to <span class="blue">significant uncertainty</span>:
<ol type="1">
<li>Market conditions</li>
<li>Competition</li>
<li>Regulation</li>
<li>Macroeconomic and exogenous shocks, such as COVID-19</li>
</ol></li>
</ul>
<div class="fragment">
<p><strong>Question:</strong> how can get take into account the role of uncertainty in valuation models?</p>
</div>
</section>
<section id="dealing-with-uncertainty-in-valuation-models-continued" class="slide level2">
<h2>Dealing with Uncertainty in Valuation Models, continued</h2>
<ul>
<li>Suppose we have the following <em>Discounted Cash Flow</em> estimate:</li>
</ul>
<p><span class="math display">\[
\text{Firm Value} = \sum_{t=1}^{T} \frac{FCF_t}{(1 + r)^t}
\]</span></p>
<ol type="1">
<li><p><span class="math inline">\(FCF_t\)</span> depends on a variety of firm-level factors, such as sales growth, gross margins, taxes, among others</p></li>
<li><p>Similarly, <span class="math inline">\(r\)</span>, the discount rate, if modeled using the <span class="blue">CAPM</span>, depends upon factors such as the sensitivity to market risk (<span class="math inline">\(\beta\)</span>), the risk-free rate, <span class="math inline">\(r_f\)</span>, and the market risk premium</p></li>
</ol>
<ul>
<li>Changes in those variables can severely affect the outcomes of our valuation: for example, if the <em>realized</em> <span class="math inline">\(FCF\)</span>â€™s are <span class="red">lower</span> than what we assumed, we might be <span class="red">overestimating</span> the firmâ€™s value!</li>
</ul>
</section>
<section id="sensitivity-analysis" class="slide level2">
<h2>Sensitivity Analysis</h2>
<ul>
<li>A first way in which we can take uncertainty into account is through <span class="blue">Sensitivity Analysis</span>:</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition</strong></p>
</div>
<div class="callout-content">
<ul>
<li>Sensitivity analysis tests how <span class="blue">changes in a single input</span> affect the valuation output, while all other variables are held constant. It is useful to identify <span class="blue">key value drivers</span> and assess their impact.</li>
</ul>
</div>
</div>
</div>
<ol type="1">
<li><p>Fix the main drivers of your outcome variable (<em>e.g</em>, growth rate of COGS, growth rate of Sales, Cost of Capital, etc)</p></li>
<li><p>For each driver, create scenarios in where you vary the input of interest within a given range</p></li>
<li><p>For that specific scenario, collect the new outcome variable calculated when everything is fixed, but the specific driver has changed</p></li>
<li><p>Repeat this across all scenarios and drivers</p></li>
</ol>
</section>
<section id="sensitivity-analysis-example" class="slide level2">
<h2>Sensitivity Analysis, Example</h2>
<ul>
<li>To illustrate the use of <span class="blue">Sensitivity Analysis</span>, we can vary <span class="math inline">\(r\)</span>, the discount rate, and observe the change in the firmâ€™s value for each distinct <span class="math inline">\(r\)</span>:</li>
</ul>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: center;"><strong>Discount Rate (</strong><span class="math inline">\(r\)</span>)</th>
<th style="text-align: center;"><strong>Firm Value (in millions)</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(6\%\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\$125\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(8\%\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\$110\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(10\%\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\$98\)</span></td>
</tr>
</tbody>
</table>
<p><strong>Key Points on Sensitivity Analysis</strong></p>
<ul>
<li>On the one hand, it helps to answer <em>how sensitive</em> is the valuation to some of the assumptions that were used in the model</li>
<li>On the other hand, there is a clear limitation: the fact that we are varying <span class="blue">one variable at a time</span> doesnâ€™t capture interactions between variables!</li>
</ul>
</section>
<section id="scenario-analysis" class="slide level2">
<h2>Scenario Analysis</h2>
<ul>
<li><p>As described before, a clear limitation of <span class="blue">Sensitivity Analysis</span> is the fact that <em>only one</em> input is evaluated at a time</p></li>
<li><p>What if we wanted to see the <em>combined</em> effect of <em>multiple</em> variables changing at the same time?</p></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition</strong></p>
</div>
<div class="callout-content">
<ul>
<li>A <span class="blue">Scenario Analysis</span> evaluates the effect of <em>multiple</em> variables changing <span class="blue">at the same time</span></li>
</ul>
<ol type="1">
<li><p>It is used to create alternative scenarios (<em>e.g</em>, <span class="green">Best</span>, <span class="yellow">Base</span>, and <span class="red">Worst</span> Case Scenarios) based on business logic</p></li>
<li><p>It is more realistic than sensitivity analysis, but still limited to a <em>few discrete outcomes</em></p></li>
</ol>
<ul>
<li>It is very reasonable to assume that more than one driver is going to change at a time. To do that, we can create a <em>grid</em> of values and simulate changes in inputs at the same time</li>
</ul>
</div>
</div>
</div>
</section>
<section id="scenario-analysis-continued" class="slide level2">
<h2>Scenario Analysis, continued</h2>
<table class="caption-top">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;"><strong>Scenario</strong></th>
<th style="text-align: center;"><strong>Revenue Growth</strong></th>
<th style="text-align: center;"><strong>Discount Rate</strong></th>
<th style="text-align: center;"><strong>Terminal Value</strong></th>
<th style="text-align: center;"><strong>Firm Value</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><span class="green">Best Case</span></td>
<td style="text-align: center;"><span class="math inline">\(8\%\)</span></td>
<td style="text-align: center;"><span class="math inline">\(6\%\)</span></td>
<td style="text-align: center;">High</td>
<td style="text-align: center;"><span class="math inline">\(\$140M\)</span></td>
</tr>
<tr class="even">
<td style="text-align: right;"><span class="yellow">Base Case</span></td>
<td style="text-align: center;"><span class="math inline">\(5\%\)</span></td>
<td style="text-align: center;"><span class="math inline">\(8\%\)</span></td>
<td style="text-align: center;">Medium</td>
<td style="text-align: center;"><span class="math inline">\(\$110M\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: right;"><span class="red">Worst Case</span></td>
<td style="text-align: center;"><span class="math inline">\(2\%\)</span></td>
<td style="text-align: center;"><span class="math inline">\(10\%\)</span></td>
<td style="text-align: center;">Low</td>
<td style="text-align: center;"><span class="math inline">\(\$85M\)</span></td>
</tr>
</tbody>
</table>
<p><strong>Key Points on Scenario Analysis</strong></p>
<ul>
<li>It highlights a <span class="blue">range</span> of possible outcomes under plausible assumptions</li>
<li>However, it still lacks a probability component: we still donâ€™t know <em>how likely</em> each of those scenarios are:</li>
</ul>
<ol type="1">
<li><p><span class="green">Best</span>, <span class="yellow">Base</span>, and <span class="red">Worst</span> cases are limited in the way that they can produce scenarios because we assume that <span class="blue">all</span> variables will go into the same direction</p></li>
<li><p>Furthermore, our realized outcome fallS under a <span class="blue">combination</span> of those scenarios</p></li>
</ol>
</section>
<section id="from-scenarios-to-simulations" class="slide level2">
<h2>From Scenarios to Simulations</h2>
<ul>
<li>What if we could extend the logit of scenario simulation to <span class="math inline">\(N&gt;&gt;3\)</span> scenarios? To do that, we can use <em>simulation</em> techniques, such as the <em>Monte Carlo</em> simulation:</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Definition:</strong></p>
</div>
<div class="callout-content">
<p>A <span class="blue">Monte Carlo Simulation</span> is a computational technique that uses random sampling to model the distribution of outcomes for a given random variable:</p>
<ol type="1">
<li>We define the parameters of our simulation as probability distributions (<em>e.g</em>., normal, lognormal).</li>
<li>Generate a large number of random scenarios for these variables</li>
<li>Compute the outcome (<em>e.g.</em>, firm value) for each scenario</li>
<li>Analyze the distribution of the desired results (<em>e.g.</em>, mean, percentiles, risk of loss)</li>
</ol>
</div>
</div>
</div>
<ul>
<li>With <span class="blue">Monte Carlo</span> simulations, instead of getting a <em>range</em> of potential outcomes for the firmâ€™s value, we actually get an empirical <em>distribution</em> of values!</li>
</ul>
</section>
<section id="monte-carlo-implementation" class="slide level2">
<h2>Monte Carlo Implementation</h2>
<ul>
<li><p>To see how we can apply <span class="blue">Monte Carlo Simulation</span> to assess the distribution of Firm Value, letâ€™s assume that both the free cash flow and the discount rate are random variables:</p>
<ol type="1">
<li><span class="math inline">\(FCF_t \sim \mathcal{N}(\mu_t, \sigma_t^2)\)</span></li>
<li><span class="math inline">\(r \sim \mathcal{N}(\mu_r, \sigma_r^2)\)</span></li>
</ol></li>
<li><p>If we know the distribution of those random variables, we can draw <span class="math inline">\(N\)</span> observations for each random variable and use it to calculate the desired outcome (<em>i.e</em>, the firmâ€™s value). For draw <span class="math inline">\(i\)</span>, the estimated value of the firm is simply:</p></li>
</ul>
<p><span class="math display">\[
\text{Firm Value}^{(i)} = \sum_{t=1}^{T} \frac{FCF_t^{(i)}}{(1 + r^{(i)})^t}
\]</span></p>
<ol type="1">
<li>Repeat for <span class="math inline">\(i = 1,2,..., N\)</span> simulations</li>
<li>Get a <em>distribution</em> of firm values, not just a point estimate</li>
</ol>
</section>
<section id="monte-carlo-implementation-1" class="slide level2">
<h2>Monte Carlo implementation</h2>
<ul>
<li>Suppose we are using the <em>Gordonâ€™s Growth Model</em>, where the value of a firm is given by the infinite stream of dividends:</li>
</ul>
<p><span class="math display">\[
V_t= \dfrac{D_1}{r-g}
\]</span></p>
<p>where <span class="math inline">\(D1\)</span> s the dividend next year, <span class="math inline">\(r\)</span> is the discount rate, and <span class="math inline">\(g\)</span> is the perpetual growth rate. If we assume the following distributions:</p>
<ol type="1">
<li>Since <span class="math inline">\(D1\)</span> is the next periodâ€™s dividend, and it is fixed to <span class="math inline">\(\$2\)</span></li>
<li><span class="math inline">\(r \sim \mathcal{N}(0.08,0.01^2)\)</span></li>
<li><span class="math inline">\(g \sim \mathcal{N}(0.03,0.005^2)\)</span></li>
</ol>
<ul>
<li>In what follows, we will simulate <span class="math inline">\(10,000\)</span> distinct scenarios for draws of <span class="math inline">\(r\)</span> and <span class="math inline">\(g\)</span> and see how the <span class="math inline">\(V_t\)</span> distributes over all potential combinations</li>
</ul>
</section>
<section id="monte-carlo-implementation-continued" class="slide level2">
<h2>Monte Carlo Implementation, continued</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Code</a></li><li><a href="#tabset-1-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co">#Set seed for reproducibility</span></span>
<span id="cb1-2"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1-3"><a></a></span>
<span id="cb1-4"><a></a><span class="co"># Parameters</span></span>
<span id="cb1-5"><a></a>n_sim <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb1-6"><a></a>D1 <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb1-7"><a></a></span>
<span id="cb1-8"><a></a><span class="co"># Simulate r and g</span></span>
<span id="cb1-9"><a></a>r <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.08</span>, <span class="at">sd =</span> <span class="fl">0.01</span>)</span>
<span id="cb1-10"><a></a>g <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.03</span>, <span class="at">sd =</span> <span class="fl">0.005</span>)</span>
<span id="cb1-11"><a></a></span>
<span id="cb1-12"><a></a><span class="co"># Compute values</span></span>
<span id="cb1-13"><a></a>value <span class="ot">&lt;-</span> D1 <span class="sc">/</span> (r <span class="sc">-</span> g)</span>
<span id="cb1-14"><a></a></span>
<span id="cb1-15"><a></a><span class="co"># Filter for valid values where r &gt; g</span></span>
<span id="cb1-16"><a></a>value <span class="ot">&lt;-</span> value[<span class="fu">is.finite</span>(value) <span class="sc">&amp;</span> (r <span class="sc">&gt;</span> g)]</span>
<span id="cb1-17"><a></a></span>
<span id="cb1-18"><a></a><span class="co"># Plot</span></span>
<span id="cb1-19"><a></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-20"><a></a><span class="fu">library</span>(scales)</span>
<span id="cb1-21"><a></a></span>
<span id="cb1-22"><a></a><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">Value =</span> value), <span class="fu">aes</span>(<span class="at">x =</span> Value)) <span class="sc">+</span></span>
<span id="cb1-23"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">60</span>, <span class="at">fill =</span> <span class="st">"#2c7fb8"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb1-24"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>dollar)<span class="sc">+</span></span>
<span id="cb1-25"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb1-26"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Valuation Distribution (Gordon Growth Model)"</span>,</span>
<span id="cb1-27"><a></a>    <span class="at">x =</span> <span class="st">"Firm Value"</span>,</span>
<span id="cb1-28"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb1-29"><a></a>  ) <span class="sc">+</span></span>
<span id="cb1-30"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size=</span><span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-3-1.png" width="1344"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="hands-on-exercise" class="slide level2">
<h2>Hands-On Exercise</h2>
<ul>
<li>Refer back to <em>NetScape</em> valuation model that you have worked on prior classes. Using Monte Carlo simulations, you were asked to <em>stress-test</em> such model by analyzing what would have happened to the base scenario <em>as-if</em> some inputs were changed</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Instructions</strong></p>
</div>
<div class="callout-content">
<ol type="1">
<li>We will be using the <em>NetScape</em> case we have worked on previous classes</li>
<li>Your first task is to translate the valuation model in such a way that you can seamlessly replicate the baseline results</li>
<li>After that, you will be prompted with a series of questions that will require you to simulate <span class="math inline">\(N\)</span> scenarios and analyze the effects on <em>NetScapeâ€™s</em> value</li>
</ol>
</div>
</div>
</div>
<p><strong>Given that the baseline price, at the time of the valuation, was $28.46, what would be your recommendation for this stock?</strong></p>
</section>
<section id="step-1-hardcoding-the-assumptions" class="slide level2">
<h2>Step 1: Hardcoding the assumptions</h2>
<ul>
<li>Recall that our Free Cash Flow estimation in peiod <span class="math inline">\(t\)</span>, <span class="math inline">\(FCF_t\)</span>, is given by:</li>
</ul>
<p><span class="math display">\[
FCF_t = EBIT\times (1-\tau) \pm \text{Depreciation} \pm \text{CAPEX} \pm \Delta NWC
\]</span> Where <span class="math inline">\(\tau\)</span> is the marginal tax-rate, <em>CAPEX</em> is <em>Capital Expenditures</em>, and <em>NWC</em> is <em>Net Working Capital</em></p>
<ul>
<li>In what follows, we will simulate the value of Netscape using a <span class="blue">10-year discounted cash flow (DCF)</span> model with structured assumptions on top of the historical revenue levels from 1995</li>
</ul>
</section>
<section id="step-1-hardcoding-the-assumptions-continued" class="slide level2">
<h2>Step 1: Hardcoding the assumptions, continued</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="co">#Number of years</span></span>
<span id="cb2-2"><a></a>n_years<span class="ot">=</span><span class="dv">10</span></span>
<span id="cb2-3"><a></a></span>
<span id="cb2-4"><a></a><span class="co"># Assumptions (copied and simplified)</span></span>
<span id="cb2-5"><a></a>netscape_assumptions <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-6"><a></a>  <span class="at">revenue_growth =</span> <span class="fu">rep</span>(<span class="fl">0.65</span>,n_years),</span>
<span id="cb2-7"><a></a>  <span class="at">cost_of_sales_pct =</span> <span class="fu">rep</span>(<span class="fl">0.1044</span>,n_years),</span>
<span id="cb2-8"><a></a>  <span class="at">rd_pct =</span> <span class="fu">rep</span>(<span class="fl">0.3676</span>,n_years),</span>
<span id="cb2-9"><a></a>  <span class="at">tax_rate =</span> <span class="fu">rep</span>(<span class="fl">0.34</span>,n_years),</span>
<span id="cb2-10"><a></a>  <span class="at">other_op_exp_pct =</span> <span class="fu">c</span>(<span class="fl">0.80</span>,<span class="fl">0.65</span>,<span class="fl">0.55</span>,<span class="fl">0.45</span>,<span class="fl">0.35</span>,<span class="fl">0.25</span>,<span class="fu">rep</span>(<span class="fl">0.2</span>,<span class="dv">4</span>)),</span>
<span id="cb2-11"><a></a>  <span class="at">capex_pct =</span> <span class="fu">c</span>(<span class="fl">0.45</span>,<span class="fl">0.4</span>,<span class="fl">0.3</span>,<span class="fl">0.2</span>,<span class="fu">rep</span>(<span class="fl">0.1</span>,<span class="dv">6</span>)),</span>
<span id="cb2-12"><a></a>  <span class="at">nwc_pct =</span> <span class="fu">rep</span>(<span class="dv">0</span>,n_years),</span>
<span id="cb2-13"><a></a>  <span class="at">depreciation_pct =</span> <span class="fu">rep</span>(<span class="fl">0.055</span>,n_years),</span>
<span id="cb2-14"><a></a>  <span class="at">beta=</span><span class="fu">rep</span>(<span class="fl">1.5</span>,n_years),</span>
<span id="cb2-15"><a></a>  <span class="at">rf=</span><span class="fu">rep</span>(<span class="fl">0.0671</span>,n_years),</span>
<span id="cb2-16"><a></a>  <span class="at">mrp=</span><span class="fu">rep</span>(<span class="fl">0.075</span>,n_years),</span>
<span id="cb2-17"><a></a>  <span class="at">shares_outstanding =</span> <span class="dv">38000</span>,</span>
<span id="cb2-18"><a></a>  <span class="at">terminal_growth =</span> <span class="fl">0.04</span>,</span>
<span id="cb2-19"><a></a>  <span class="at">terminal_r=</span><span class="fl">0.1796</span></span>
<span id="cb2-20"><a></a>)</span>
<span id="cb2-21"><a></a></span>
<span id="cb2-22"><a></a><span class="co"># Base year (1995)</span></span>
<span id="cb2-23"><a></a>netscape_base_rev <span class="ot">&lt;-</span> <span class="dv">33250</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="step-2-getting-the-forecasted-free-cash-flow" class="slide level2">
<h2>Step 2: Getting the forecasted <em>Free Cash Flow</em></h2>
<ul>
<li><p>After we got our assumptions in place, it is time to put them together and generate the <em>Free Cash Flow</em> values for <span class="math inline">\(t=1,2,...,10\)</span></p></li>
<li><p>For that, we will create a function, <code>get_projections</code>, that has two arguments:</p>
<ol type="1">
<li><code>assumptions</code>: a named list containing vectors of financial assumptions (growth rates, margins, etc) for each year</li>
<li><code>base</code>: the base year revenue (e.g., from 1995).</li>
</ol></li>
<li><p>We initialize an empty data frame projection with columns for each financial metric over the 10-year period, and fill out the results using the <em>Free Cash Flow</em> definition</p></li>
<li><p>With this function, you should be able to replicate the <em>Free Cash Flows</em> from the base scenario by calling <code>get_projection(netscape_assumptions,netscape_base_rev)</code></p></li>
</ul>
</section>
<section id="step-2-getting-the-forecasted-free-cash-flow-continued" class="slide level2">
<h2>Step 2: Getting the forecasted <em>Free Cash Flow</em>, continued</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="co"># Projection over 10 years</span></span>
<span id="cb3-2"><a></a>get_projection <span class="ot">&lt;-</span> <span class="cf">function</span>(assumptions,base){</span>
<span id="cb3-3"><a></a>  </span>
<span id="cb3-4"><a></a>  projection<span class="ot">=</span><span class="fu">data.frame</span>(</span>
<span id="cb3-5"><a></a>      <span class="at">Year =</span> <span class="dv">1</span><span class="sc">:</span>n_years,</span>
<span id="cb3-6"><a></a>      <span class="at">Revenue =</span> <span class="cn">NA</span>,</span>
<span id="cb3-7"><a></a>      <span class="at">EBIT =</span> <span class="cn">NA</span>,</span>
<span id="cb3-8"><a></a>      <span class="at">Taxes =</span> <span class="cn">NA</span>,</span>
<span id="cb3-9"><a></a>      <span class="at">NOPAT =</span> <span class="cn">NA</span>,</span>
<span id="cb3-10"><a></a>      <span class="at">Depreciation =</span> <span class="cn">NA</span>,</span>
<span id="cb3-11"><a></a>      <span class="at">CAPEX =</span> <span class="cn">NA</span>,</span>
<span id="cb3-12"><a></a>      <span class="at">NWC =</span> <span class="cn">NA</span>,</span>
<span id="cb3-13"><a></a>      <span class="at">Delta_NWC =</span> <span class="cn">NA</span>,</span>
<span id="cb3-14"><a></a>      <span class="at">Discount_Rate=</span><span class="cn">NA</span>)</span>
<span id="cb3-15"><a></a></span>
<span id="cb3-16"><a></a>  <span class="co"># Fill in projections for revenue</span></span>
<span id="cb3-17"><a></a>  <span class="cf">for</span> (t <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_years) {</span>
<span id="cb3-18"><a></a>    <span class="cf">if</span> (t <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb3-19"><a></a>      projection<span class="sc">$</span>Revenue[t] <span class="ot">&lt;-</span> base <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> assumptions<span class="sc">$</span>revenue_growth[t])</span>
<span id="cb3-20"><a></a>    } <span class="cf">else</span> {</span>
<span id="cb3-21"><a></a>      projection<span class="sc">$</span>Revenue[t] <span class="ot">&lt;-</span> projection<span class="sc">$</span>Revenue[t <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> assumptions<span class="sc">$</span>revenue_growth[t])</span>
<span id="cb3-22"><a></a>    }</span>
<span id="cb3-23"><a></a>  }</span>
<span id="cb3-24"><a></a>  </span>
<span id="cb3-25"><a></a>  <span class="co">#Fill in FCF terms</span></span>
<span id="cb3-26"><a></a>  projection<span class="sc">$</span>EBIT <span class="ot">&lt;-</span> projection<span class="sc">$</span>Revenue <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> assumptions<span class="sc">$</span>cost_of_sales_pct <span class="sc">-</span> assumptions<span class="sc">$</span>rd_pct <span class="sc">-</span> assumptions<span class="sc">$</span>other_op_exp_pct <span class="sc">-</span> assumptions<span class="sc">$</span>depreciation_pct)</span>
<span id="cb3-27"><a></a>  projection<span class="sc">$</span>Taxes <span class="ot">&lt;-</span> projection<span class="sc">$</span>EBIT <span class="sc">*</span> assumptions<span class="sc">$</span>tax_rate</span>
<span id="cb3-28"><a></a>  projection<span class="sc">$</span>NOPAT <span class="ot">&lt;-</span> projection<span class="sc">$</span>EBIT <span class="sc">-</span> projection<span class="sc">$</span>Taxes</span>
<span id="cb3-29"><a></a>  projection<span class="sc">$</span>Depreciation <span class="ot">&lt;-</span> projection<span class="sc">$</span>Revenue <span class="sc">*</span> assumptions<span class="sc">$</span>depreciation_pct</span>
<span id="cb3-30"><a></a>  projection<span class="sc">$</span>CAPEX <span class="ot">&lt;-</span> projection<span class="sc">$</span>Revenue <span class="sc">*</span> assumptions<span class="sc">$</span>capex_pct</span>
<span id="cb3-31"><a></a>  projection<span class="sc">$</span>NWC <span class="ot">&lt;-</span> projection<span class="sc">$</span>Revenue<span class="sc">*</span>assumptions<span class="sc">$</span>nwc_pct</span>
<span id="cb3-32"><a></a>  projection<span class="sc">$</span>Delta_NWC <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb3-33"><a></a>  projection<span class="sc">$</span>Discount_Rate <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>(assumptions<span class="sc">$</span>rf<span class="sc">+</span>assumptions<span class="sc">$</span>mrp<span class="sc">*</span>assumptions<span class="sc">$</span>beta))<span class="sc">^</span>projection<span class="sc">$</span>Year</span>
<span id="cb3-34"><a></a>  </span>
<span id="cb3-35"><a></a>  <span class="fu">return</span>(projection)</span>
<span id="cb3-36"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="valuing-the-company-using-fcf" class="slide level2">
<h2>Valuing the company using FCF</h2>
<ul>
<li><p>We will now create two additional functions:</p>
<ol type="1">
<li><p>The <code>get_dcf()</code> function will calculate the <em>Discounted Cash Flow</em> for the whole period, based on the projections we have just created. It returns a scalar value representing the present value of projected <em>Free Cash Flows</em></p></li>
<li><p>The <code>get_terminal_value()</code> will calculate an estimate of the present value of the perpetuity (in Year 0) based on the projections and the assumptions regarding the long-term <code>r</code> and <code>g</code>. ItcComputes the terminal value of the firm beyond the projection horizon using a growing perpetuity</p></li>
</ol></li>
<li><p>Adding up these two values yields the total value of the firm, <span class="math inline">\(V\)</span>, which is embedded in the <code>get_EV()</code> function:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">get_EV</span>(netscape_assumptions,</span>
<span id="cb4-2"><a></a>       netscape_base_rev,</span>
<span id="cb4-3"><a></a>       netscape_assumptions<span class="sc">$</span>terminal_r,</span>
<span id="cb4-4"><a></a>       netscape_assumptions<span class="sc">$</span>terminal_growth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="valuing-the-company-using-fcf-continued" class="slide level2">
<h2>Valuing the company using FCF, continued</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>get_dcf <span class="ot">&lt;-</span> <span class="cf">function</span>(projection){</span>
<span id="cb5-2"><a></a>  </span>
<span id="cb5-3"><a></a>  dcf<span class="ot">=</span>projection<span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a></a>    <span class="fu">mutate</span>(<span class="at">FCF =</span> NOPAT <span class="sc">+</span> Depreciation <span class="sc">-</span> CAPEX <span class="sc">-</span> Delta_NWC)<span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a></a>    <span class="fu">reframe</span>(<span class="at">DCF=</span>FCF<span class="sc">*</span>Discount_Rate)<span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a></a>    <span class="fu">pull</span>(DCF)<span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a></a>    <span class="fu">sum</span>()</span>
<span id="cb5-8"><a></a>  </span>
<span id="cb5-9"><a></a>  <span class="fu">return</span>(dcf)</span>
<span id="cb5-10"><a></a>  </span>
<span id="cb5-11"><a></a>}</span>
<span id="cb5-12"><a></a></span>
<span id="cb5-13"><a></a>get_terminal_value <span class="ot">&lt;-</span> <span class="cf">function</span>(projection,r,g){</span>
<span id="cb5-14"><a></a></span>
<span id="cb5-15"><a></a>  last_fcf<span class="ot">=</span>projection<span class="sc">%&gt;%</span></span>
<span id="cb5-16"><a></a>    <span class="fu">mutate</span>(<span class="at">FCF =</span> NOPAT <span class="sc">+</span> Depreciation <span class="sc">-</span> CAPEX <span class="sc">-</span> Delta_NWC)<span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a></a>    <span class="fu">pull</span>(FCF)<span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a></a>    <span class="fu">tail</span>(<span class="dv">1</span>)</span>
<span id="cb5-19"><a></a>  </span>
<span id="cb5-20"><a></a>  <span class="fu">return</span>(last_fcf<span class="sc">*</span>(<span class="dv">1</span><span class="sc">+</span>g)<span class="sc">/</span>(r<span class="sc">-</span>g)<span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>r)<span class="sc">^</span>(n_years<span class="sc">+</span><span class="dv">1</span>))</span>
<span id="cb5-21"><a></a>}</span>
<span id="cb5-22"><a></a></span>
<span id="cb5-23"><a></a>get_EV <span class="ot">&lt;-</span><span class="cf">function</span>(assumptions,base,r,g){</span>
<span id="cb5-24"><a></a></span>
<span id="cb5-25"><a></a>  PV_FCF <span class="ot">=</span> <span class="fu">get_projection</span>(assumptions,base)<span class="sc">%&gt;%</span><span class="fu">get_dcf</span>()</span>
<span id="cb5-26"><a></a>  PV_Terminal <span class="ot">=</span> <span class="fu">get_projection</span>(assumptions,base)<span class="sc">%&gt;%</span><span class="fu">get_terminal_value</span>(r,g)</span>
<span id="cb5-27"><a></a>  </span>
<span id="cb5-28"><a></a>  <span class="fu">return</span>(PV_FCF<span class="sc">+</span>PV_Terminal)</span>
<span id="cb5-29"><a></a></span>
<span id="cb5-30"><a></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise-1-changing-revenue-growth" class="slide level2">
<h2>Exercise 1: changing revenue growth</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">Code</a></li><li><a href="#tabset-2-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>  <span class="co">#Set seed for reproducibility</span></span>
<span id="cb6-2"><a></a>  <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb6-3"><a></a></span>
<span id="cb6-4"><a></a>  <span class="co"># Initialize an empty dataframe</span></span>
<span id="cb6-5"><a></a>  results <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">0</span>)</span>
<span id="cb6-6"><a></a>  sim_assumptions <span class="ot">&lt;-</span> netscape_assumptions</span>
<span id="cb6-7"><a></a>  n_sim<span class="ot">=</span><span class="dv">10000</span></span>
<span id="cb6-8"><a></a>  </span>
<span id="cb6-9"><a></a>  <span class="co">#Run the simulation</span></span>
<span id="cb6-10"><a></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim){</span>
<span id="cb6-11"><a></a></span>
<span id="cb6-12"><a></a>    <span class="co"># Simulate revenue growth for 10 years from a normal distribution</span></span>
<span id="cb6-13"><a></a>    rev_growth <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.65</span>, <span class="at">sd =</span> <span class="fl">0.1</span>)</span>
<span id="cb6-14"><a></a>    </span>
<span id="cb6-15"><a></a>    <span class="co"># Modify assumptions with simulated growth</span></span>
<span id="cb6-16"><a></a>    sim_assumptions<span class="sc">$</span>revenue_growth <span class="ot">&lt;-</span> rev_growth</span>
<span id="cb6-17"><a></a>    </span>
<span id="cb6-18"><a></a>    <span class="co"># Compute EV for this simulation</span></span>
<span id="cb6-19"><a></a>    ev <span class="ot">&lt;-</span> <span class="fu">get_EV</span>(sim_assumptions,</span>
<span id="cb6-20"><a></a>                 netscape_base_rev,</span>
<span id="cb6-21"><a></a>                 sim_assumptions<span class="sc">$</span>terminal_r,</span>
<span id="cb6-22"><a></a>                 sim_assumptions<span class="sc">$</span>terminal_growth)</span>
<span id="cb6-23"><a></a>    </span>
<span id="cb6-24"><a></a>    results[i] <span class="ot">&lt;-</span> ev</span>
<span id="cb6-25"><a></a>  }</span>
<span id="cb6-26"><a></a>  </span>
<span id="cb6-27"><a></a></span>
<span id="cb6-28"><a></a>  <span class="co">#Create a ggplot histogram</span></span>
<span id="cb6-29"><a></a>  results<span class="sc">%&gt;%</span></span>
<span id="cb6-30"><a></a>    <span class="fu">as.tibble</span>()<span class="sc">%&gt;%</span></span>
<span id="cb6-31"><a></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb6-32"><a></a>    <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">bins =</span> <span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb6-33"><a></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb6-34"><a></a>    <span class="fu">labs</span>(</span>
<span id="cb6-35"><a></a>      <span class="at">title =</span> <span class="st">"Monte Carlo Simulation of Enterprise Value"</span>,</span>
<span id="cb6-36"><a></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">'Drawing '</span>,<span class="fu">comma</span>(n_sim), <span class="st">' simulations of Revenue Growth.'</span>), </span>
<span id="cb6-37"><a></a>      <span class="at">x =</span> <span class="st">"Enterprise Value (USD, Thousands)"</span>,</span>
<span id="cb6-38"><a></a>      <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb6-39"><a></a>    ) <span class="sc">+</span></span>
<span id="cb6-40"><a></a>    <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-9-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="exercise-2-changing-revenue-growth-and-cogs" class="slide level2">
<h2>Exercise 2: Changing Revenue Growth and COGS</h2>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">Code</a></li><li><a href="#tabset-3-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>  <span class="co">#Set seed for reproducibility</span></span>
<span id="cb7-2"><a></a>  <span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb7-3"><a></a></span>
<span id="cb7-4"><a></a>  <span class="co"># Initialize an empty dataframe</span></span>
<span id="cb7-5"><a></a>  results <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">0</span>)</span>
<span id="cb7-6"><a></a>  sim_assumptions <span class="ot">&lt;-</span> netscape_assumptions</span>
<span id="cb7-7"><a></a>  n_sim<span class="ot">=</span><span class="dv">10000</span></span>
<span id="cb7-8"><a></a></span>
<span id="cb7-9"><a></a><span class="co">#Run the simulation</span></span>
<span id="cb7-10"><a></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim){</span>
<span id="cb7-11"><a></a>  </span>
<span id="cb7-12"><a></a>  <span class="co"># Simulate revenue growth for 10 years from a normal distribution</span></span>
<span id="cb7-13"><a></a>  rev_growth <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.65</span>, <span class="at">sd =</span> <span class="fl">0.1</span>)</span>
<span id="cb7-14"><a></a>  cogs_perc <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.10</span>, <span class="at">sd =</span> <span class="fl">0.025</span>)</span>
<span id="cb7-15"><a></a>  </span>
<span id="cb7-16"><a></a>  <span class="co"># Modify assumptions with simulated growth</span></span>
<span id="cb7-17"><a></a>  sim_assumptions<span class="sc">$</span>revenue_growth <span class="ot">&lt;-</span> rev_growth</span>
<span id="cb7-18"><a></a>  sim_assumptions<span class="sc">$</span>cost_of_sales_pct <span class="ot">&lt;-</span> cogs_perc</span>
<span id="cb7-19"><a></a>  </span>
<span id="cb7-20"><a></a>  <span class="co"># Compute EV for this simulation</span></span>
<span id="cb7-21"><a></a>  ev <span class="ot">&lt;-</span> <span class="fu">get_EV</span>(sim_assumptions,</span>
<span id="cb7-22"><a></a>               netscape_base_rev,</span>
<span id="cb7-23"><a></a>               sim_assumptions<span class="sc">$</span>terminal_r,</span>
<span id="cb7-24"><a></a>               sim_assumptions<span class="sc">$</span>terminal_growth)</span>
<span id="cb7-25"><a></a>  </span>
<span id="cb7-26"><a></a>  results[i] <span class="ot">&lt;-</span> ev</span>
<span id="cb7-27"><a></a>}</span>
<span id="cb7-28"><a></a></span>
<span id="cb7-29"><a></a><span class="co">#Create a ggplot histogram</span></span>
<span id="cb7-30"><a></a>results<span class="sc">%&gt;%</span></span>
<span id="cb7-31"><a></a>  <span class="fu">as.tibble</span>()<span class="sc">%&gt;%</span></span>
<span id="cb7-32"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb7-33"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">bins =</span> <span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb7-34"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb7-35"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb7-36"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Simulation of Enterprise Value"</span>,</span>
<span id="cb7-37"><a></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">'Drawing '</span>,<span class="fu">comma</span>(n_sim), <span class="st">' simulations of Revenue Growth and % COGS.'</span>), </span>
<span id="cb7-38"><a></a>    <span class="at">x =</span> <span class="st">"Enterprise Value (USD, Thousands)"</span>,</span>
<span id="cb7-39"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb7-40"><a></a>  ) <span class="sc">+</span></span>
<span id="cb7-41"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-11-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="exercise-3-changing-revenue-growth-cogs-and-capex" class="slide level2">
<h2>Exercise 3: Changing Revenue Growth, COGS, and CAPEX</h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Code</a></li><li><a href="#tabset-4-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a><span class="co">#Set seed for reproducibility</span></span>
<span id="cb8-2"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb8-3"><a></a></span>
<span id="cb8-4"><a></a><span class="co"># Initialize an empty dataframe</span></span>
<span id="cb8-5"><a></a>results <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">0</span>)</span>
<span id="cb8-6"><a></a>sim_assumptions <span class="ot">&lt;-</span> netscape_assumptions</span>
<span id="cb8-7"><a></a>n_sim<span class="ot">=</span><span class="dv">10000</span></span>
<span id="cb8-8"><a></a></span>
<span id="cb8-9"><a></a><span class="co">#Run the simulation</span></span>
<span id="cb8-10"><a></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim){</span>
<span id="cb8-11"><a></a>  </span>
<span id="cb8-12"><a></a>  <span class="co"># Simulate revenue growth for 10 years from a normal distribution</span></span>
<span id="cb8-13"><a></a>  rev_growth <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.65</span>, <span class="at">sd =</span> <span class="fl">0.1</span>)</span>
<span id="cb8-14"><a></a>  cogs_perc <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.10</span>, <span class="at">sd =</span> <span class="fl">0.025</span>)</span>
<span id="cb8-15"><a></a>  capex_perc <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean =</span> <span class="fl">0.45</span>, <span class="at">sd =</span> <span class="fl">0.1</span>),<span class="at">to=</span><span class="fl">0.1</span>,<span class="at">length.out =</span> <span class="dv">10</span>)</span>
<span id="cb8-16"><a></a>  </span>
<span id="cb8-17"><a></a>  <span class="co"># Modify assumptions with simulated growth</span></span>
<span id="cb8-18"><a></a>  sim_assumptions<span class="sc">$</span>revenue_growth <span class="ot">&lt;-</span> rev_growth</span>
<span id="cb8-19"><a></a>  sim_assumptions<span class="sc">$</span>cost_of_sales_pct <span class="ot">&lt;-</span> cogs_perc</span>
<span id="cb8-20"><a></a>  sim_assumptions<span class="sc">$</span>capex_pct <span class="ot">&lt;-</span> capex_perc</span>
<span id="cb8-21"><a></a>  </span>
<span id="cb8-22"><a></a>  <span class="co"># Compute EV for this simulation</span></span>
<span id="cb8-23"><a></a>  ev <span class="ot">&lt;-</span> <span class="fu">get_EV</span>(sim_assumptions,</span>
<span id="cb8-24"><a></a>               netscape_base_rev,</span>
<span id="cb8-25"><a></a>               sim_assumptions<span class="sc">$</span>terminal_r,</span>
<span id="cb8-26"><a></a>               sim_assumptions<span class="sc">$</span>terminal_growth)</span>
<span id="cb8-27"><a></a>  </span>
<span id="cb8-28"><a></a>  results[i] <span class="ot">&lt;-</span> ev</span>
<span id="cb8-29"><a></a>}</span>
<span id="cb8-30"><a></a></span>
<span id="cb8-31"><a></a><span class="co">#Create a ggplot histogram</span></span>
<span id="cb8-32"><a></a>results<span class="sc">%&gt;%</span></span>
<span id="cb8-33"><a></a>  <span class="fu">as.tibble</span>()<span class="sc">%&gt;%</span></span>
<span id="cb8-34"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb8-35"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">bins =</span> <span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb8-36"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb8-37"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb8-38"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Simulation of Enterprise Value"</span>,</span>
<span id="cb8-39"><a></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">'Drawing '</span>,<span class="fu">comma</span>(n_sim), <span class="st">' simulations of Revenue Growth, % COGS, and % CAPEX.'</span>), </span>
<span id="cb8-40"><a></a>    <span class="at">x =</span> <span class="st">"Enterprise Value (USD, Thousands)"</span>,</span>
<span id="cb8-41"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb8-42"><a></a>  ) <span class="sc">+</span></span>
<span id="cb8-43"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)</span>
<span id="cb8-44"><a></a></span>
<span id="cb8-45"><a></a>final_results<span class="ot">=</span>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-13-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="exercise-4-different-levels-for-terminal-r-and-g" class="slide level2">
<h2>Exercise 4: Different levels for terminal <span class="math inline">\(r\)</span> and <span class="math inline">\(g\)</span></h2>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">Code</a></li><li><a href="#tabset-5-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="co">#Set seed for reproducibility</span></span>
<span id="cb9-2"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb9-3"><a></a></span>
<span id="cb9-4"><a></a><span class="co"># Initialize an empty dataframe</span></span>
<span id="cb9-5"><a></a>results <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">0</span>)</span>
<span id="cb9-6"><a></a>new_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb9-7"><a></a>sim_assumptions <span class="ot">&lt;-</span> netscape_assumptions</span>
<span id="cb9-8"><a></a>n_sim<span class="ot">=</span><span class="dv">1000</span></span>
<span id="cb9-9"><a></a>g_sequence <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.05</span>,<span class="fl">0.03</span>,<span class="at">length.out=</span><span class="dv">10</span>)</span>
<span id="cb9-10"><a></a>r_sequence <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fl">0.15</span>,<span class="fl">0.225</span>,<span class="at">length.out=</span><span class="dv">10</span>)</span>
<span id="cb9-11"><a></a></span>
<span id="cb9-12"><a></a><span class="cf">for</span>(s <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb9-13"><a></a>  </span>
<span id="cb9-14"><a></a>  <span class="co">#Run the simulation</span></span>
<span id="cb9-15"><a></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim){</span>
<span id="cb9-16"><a></a>    </span>
<span id="cb9-17"><a></a>    <span class="co"># Simulate revenue growth for 10 years from a normal distribution</span></span>
<span id="cb9-18"><a></a>    rev_growth <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.65</span>, <span class="at">sd =</span> <span class="fl">0.1</span>)</span>
<span id="cb9-19"><a></a>    cogs_perc <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_years, <span class="at">mean =</span> <span class="fl">0.10</span>, <span class="at">sd =</span> <span class="fl">0.025</span>)</span>
<span id="cb9-20"><a></a>    capex_perc <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean =</span> <span class="fl">0.45</span>, <span class="at">sd =</span> <span class="fl">0.1</span>),<span class="at">to=</span><span class="fl">0.1</span>,<span class="at">length.out =</span> <span class="dv">10</span>)</span>
<span id="cb9-21"><a></a>    </span>
<span id="cb9-22"><a></a>    <span class="co"># Modify assumptions with simulated growth</span></span>
<span id="cb9-23"><a></a>    sim_assumptions<span class="sc">$</span>revenue_growth <span class="ot">&lt;-</span> rev_growth</span>
<span id="cb9-24"><a></a>    sim_assumptions<span class="sc">$</span>cost_of_sales_pct <span class="ot">&lt;-</span> cogs_perc</span>
<span id="cb9-25"><a></a>    sim_assumptions<span class="sc">$</span>capex_pct <span class="ot">&lt;-</span> capex_perc</span>
<span id="cb9-26"><a></a>    sim_assumptions<span class="sc">$</span>terminal_growth <span class="ot">=</span> g_sequence[s]</span>
<span id="cb9-27"><a></a>    sim_assumptions<span class="sc">$</span>terminal_r <span class="ot">=</span> r_sequence[s]</span>
<span id="cb9-28"><a></a>    </span>
<span id="cb9-29"><a></a>    <span class="co"># Compute EV for this simulation</span></span>
<span id="cb9-30"><a></a>    ev <span class="ot">&lt;-</span> <span class="fu">get_EV</span>(sim_assumptions,</span>
<span id="cb9-31"><a></a>                 netscape_base_rev,</span>
<span id="cb9-32"><a></a>                 sim_assumptions<span class="sc">$</span>terminal_r,</span>
<span id="cb9-33"><a></a>                 sim_assumptions<span class="sc">$</span>terminal_growth)</span>
<span id="cb9-34"><a></a>    </span>
<span id="cb9-35"><a></a>    results[i] <span class="ot">&lt;-</span> ev</span>
<span id="cb9-36"><a></a>  }</span>
<span id="cb9-37"><a></a>  </span>
<span id="cb9-38"><a></a>  <span class="co">#Store the Pairs</span></span>
<span id="cb9-39"><a></a>  new_data<span class="ot">=</span>new_data<span class="sc">%&gt;%</span></span>
<span id="cb9-40"><a></a>    <span class="fu">rbind</span>(<span class="fu">data.frame</span>(<span class="at">Scenario =</span> <span class="fu">paste0</span>(<span class="st">'Scenario '</span>, s),</span>
<span id="cb9-41"><a></a>                     <span class="at">EV=</span>results))</span>
<span id="cb9-42"><a></a>          </span>
<span id="cb9-43"><a></a>  <span class="fu">message</span>(<span class="fu">paste0</span>(<span class="st">'Finished simulation for pair number '</span>,s,<span class="st">'.'</span>))</span>
<span id="cb9-44"><a></a>}</span>
<span id="cb9-45"><a></a></span>
<span id="cb9-46"><a></a></span>
<span id="cb9-47"><a></a><span class="co">#install.packages('ggridges')</span></span>
<span id="cb9-48"><a></a><span class="fu">library</span>(ggridges)</span>
<span id="cb9-49"><a></a></span>
<span id="cb9-50"><a></a><span class="co">#Create a ggplot histogram</span></span>
<span id="cb9-51"><a></a>new_data<span class="sc">%&gt;%</span></span>
<span id="cb9-52"><a></a>  <span class="fu">mutate</span>(<span class="at">Scenario =</span> <span class="fu">factor</span>(Scenario,<span class="at">levels=</span><span class="fu">paste0</span>(<span class="st">'Scenario '</span>,<span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb9-53"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> EV,</span>
<span id="cb9-54"><a></a>             <span class="at">y =</span> Scenario,</span>
<span id="cb9-55"><a></a>             <span class="at">fill=</span>..x..)) <span class="sc">+</span></span>
<span id="cb9-56"><a></a>  <span class="fu">geom_density_ridges_gradient</span>(<span class="at">scale =</span> <span class="dv">3</span>, <span class="at">rel_min_height =</span> <span class="fl">0.01</span>)<span class="sc">+</span></span>
<span id="cb9-57"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb9-58"><a></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">name =</span> <span class="st">"Enterprise Value"</span>, <span class="at">option =</span> <span class="st">"plasma"</span>,<span class="at">labels=</span>scales<span class="sc">::</span>dollar)<span class="sc">+</span></span>
<span id="cb9-59"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb9-60"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Simulation of Enterprise Value"</span>,</span>
<span id="cb9-61"><a></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">'Drawing '</span>,<span class="fu">comma</span>(n_sim), <span class="st">' simulations, best-to-worse scenarios.'</span>), </span>
<span id="cb9-62"><a></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb9-63"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span>,</span>
<span id="cb9-64"><a></a>    <span class="at">fill =</span> <span class="st">"Enterprise Value (USD, Thousands)"</span>)<span class="sc">+</span></span>
<span id="cb9-65"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">14</span>)<span class="sc">+</span></span>
<span id="cb9-66"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">'bottom'</span>,</span>
<span id="cb9-67"><a></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb9-68"><a></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb9-69"><a></a>        <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">0.6</span>, <span class="st">"cm"</span>),</span>
<span id="cb9-70"><a></a>        <span class="at">legend.key.width =</span> <span class="fu">unit</span>(<span class="fl">2.5</span>, <span class="st">"cm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-15-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="final-question-should-we-invest" class="slide level2">
<h2>Final Question: should we invest?</h2>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1">Code</a></li><li><a href="#tabset-6-2">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="co">#Create a ggplot histogram</span></span>
<span id="cb10-2"><a></a>prices<span class="ot">=</span>final_results<span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a></a>  <span class="fu">as.tibble</span>()<span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a></a>  <span class="fu">mutate</span>(<span class="at">Price=</span>value<span class="sc">/</span>netscape_assumptions<span class="sc">$</span>shares_outstanding)<span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a></a>  <span class="fu">mutate</span>(<span class="at">Situation=</span><span class="fu">ifelse</span>(Price<span class="sc">&gt;=</span><span class="fl">28.37</span>,<span class="st">'Undervalued'</span>,<span class="st">'Overvalued'</span>))</span>
<span id="cb10-6"><a></a></span>
<span id="cb10-7"><a></a>prices<span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Price)) <span class="sc">+</span></span>
<span id="cb10-9"><a></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Situation), <span class="at">bins =</span> <span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb10-10"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)<span class="sc">+</span></span>
<span id="cb10-11"><a></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">'darkgreen'</span>,<span class="st">'darkred'</span>))<span class="sc">+</span></span>
<span id="cb10-12"><a></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="fl">28.37</span>,<span class="at">linetype=</span><span class="st">'dashed'</span>,<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb10-13"><a></a>  <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">'text'</span>,<span class="at">x=</span><span class="dv">40</span>,<span class="at">y=</span><span class="dv">500</span>,<span class="at">label=</span> <span class="fu">paste0</span>(<span class="st">'True Price is higher than </span><span class="sc">\n</span><span class="st">baseline price only in '</span>,</span>
<span id="cb10-14"><a></a>                                                <span class="fu">percent</span>(<span class="fu">mean</span>(prices<span class="sc">$</span>Price<span class="sc">&gt;=</span><span class="fl">28.37</span>)),</span>
<span id="cb10-15"><a></a>                                                <span class="st">' of the cases!'</span>))<span class="sc">+</span></span>
<span id="cb10-16"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb10-17"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Simulation of Share Price"</span>,</span>
<span id="cb10-18"><a></a>    <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">'Drawing 10,000 simulations'</span>), </span>
<span id="cb10-19"><a></a>    <span class="at">x =</span> <span class="st">"Enterprise Value (USD, Thousands)"</span>,</span>
<span id="cb10-20"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb10-21"><a></a>  ) <span class="sc">+</span></span>
<span id="cb10-22"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)<span class="sc">+</span></span>
<span id="cb10-23"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">'bottom'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-2">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-17-1.png" width="1440"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="overall-thoughts-on-monte-carlo-simulation" class="slide level2">
<h2>Overall thoughts on Monte Carlo Simulation</h2>
<ul>
<li><p><span class="blue">Monte Carlo Simulation</span> is a powerful technique to handle model uncertainty:</p>
<ol type="1">
<li>It helps managers think beyond the point estimate of the valuation model and handle <em>what-if</em> questions</li>
<li>It also helps <em>stress-testing</em> the valuation model</li>
</ol></li>
<li><p>It should be used along with business logic to help tailor the simulation exercise:</p>
<ol type="1">
<li>We donâ€™t want to create overly complex simulations</li>
<li>We can incorporate more structure to create meaningful scenarios - for example, imposing a correlation structure between the variables</li>
</ol></li>
<li><p>By setting up proper simulation parameters (number of simulations, the distributions and its parameters, etc), we can leverage the role of uncertainty in valuation models in a much more pronounced way and guide decision-making!</p></li>
</ul>
</section>
<section id="extensions" class="slide level2">
<h2>Extensions</h2>
<p><strong>Question</strong>: how can we improve our simulation exercise?</p>
<ul>
<li>In what follows, weâ€™ll take a look at several ways by which you could extend your simulation coding exercise to cope with real-world features. To illustrate, we will adopt a simple valuation approach of the following form:</li>
</ul>
<p><span class="math display">\[
\small V_i = \sum_{t=1}^{t=5}\dfrac{FCF_t}{(1+r)^t}+ PV_0\bigg(\dfrac{FCF_5\times(1+g)}{r-g}\bigg)
\]</span></p>
<ul>
<li><p>In words, we are breaking down the firms value into:</p>
<ol type="1">
<li>A 1-5 year horizon</li>
<li>A growing perpetuity, discounted back to <span class="blue">Year 0</span></li>
</ol></li>
<li><p>From that, we can extend the simulation routines to allow for important features that are present in real-world data</p></li>
</ul>
</section>
<section id="base-case-simulation" class="slide level2">
<h2>Base Case Simulation</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Outline</a></li><li><a href="#tabset-7-2">Code</a></li><li><a href="#tabset-7-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<ul>
<li>The base case denotes the <span class="blue">Free Cash Flow</span> in period <span class="math inline">\(t\)</span> as:</li>
</ul>
<p><span class="math display">\[
FCF_t = Sales_t\times(1-COGS) \pm CAPEX \pm \Delta NWC
\]</span></p>
<ol type="1">
<li>Initial Sales levels are <span class="math inline">\(\$100\)</span></li>
<li>The percent of <span class="blue">Cost of Goods Sold (COGS)</span> is <span class="math inline">\(60\%\)</span></li>
<li><span class="blue">Capital Expenditures (CAPEX)</span> is <span class="math inline">\(15\%\)</span> of Sales</li>
<li><span class="blue">Net Working Capital</span> investment is <span class="math inline">\(5%\)</span> of sales</li>
</ol>
</div>
<div id="tabset-7-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">library</span>(glue)</span>
<span id="cb11-2"><a></a><span class="fu">library</span>(MASS)</span>
<span id="cb11-3"><a></a></span>
<span id="cb11-4"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb11-5"><a></a>n_sim <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb11-6"><a></a></span>
<span id="cb11-7"><a></a><span class="co"># Parameters</span></span>
<span id="cb11-8"><a></a>initial_sales <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb11-9"><a></a>cogs_pct <span class="ot">&lt;-</span> <span class="fl">0.6</span></span>
<span id="cb11-10"><a></a>capex_pct <span class="ot">&lt;-</span> <span class="fl">0.15</span></span>
<span id="cb11-11"><a></a>nwc_pct <span class="ot">&lt;-</span> <span class="fl">0.05</span></span>
<span id="cb11-12"><a></a></span>
<span id="cb11-13"><a></a>simulate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(r, g, <span class="at">label=</span><span class="st">'All'</span>) {</span>
<span id="cb11-14"><a></a>  firm_value <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n_sim)</span>
<span id="cb11-15"><a></a>  </span>
<span id="cb11-16"><a></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim) {</span>
<span id="cb11-17"><a></a>    sales <span class="ot">&lt;-</span> initial_sales</span>
<span id="cb11-18"><a></a>    nwc_last <span class="ot">&lt;-</span> sales <span class="sc">*</span> nwc_pct</span>
<span id="cb11-19"><a></a>    fa_last <span class="ot">&lt;-</span> sales <span class="sc">*</span> capex_pct</span>
<span id="cb11-20"><a></a>    fcf <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">5</span>)</span>
<span id="cb11-21"><a></a>    </span>
<span id="cb11-22"><a></a>    <span class="cf">for</span> (t <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb11-23"><a></a>      sales <span class="ot">&lt;-</span> sales <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> g[i])</span>
<span id="cb11-24"><a></a>      nwc_current <span class="ot">&lt;-</span> sales <span class="sc">*</span> nwc_pct</span>
<span id="cb11-25"><a></a>      fa_current <span class="ot">&lt;-</span> sales <span class="sc">*</span> capex_pct</span>
<span id="cb11-26"><a></a>      </span>
<span id="cb11-27"><a></a>      delta_nwc <span class="ot">&lt;-</span> nwc_current <span class="sc">-</span> nwc_last</span>
<span id="cb11-28"><a></a>      delta_capex <span class="ot">&lt;-</span> fa_current <span class="sc">-</span> fa_last</span>
<span id="cb11-29"><a></a>      </span>
<span id="cb11-30"><a></a>      nwc_last <span class="ot">&lt;-</span> nwc_current</span>
<span id="cb11-31"><a></a>      fa_last <span class="ot">&lt;-</span> fa_current</span>
<span id="cb11-32"><a></a>      </span>
<span id="cb11-33"><a></a>      fcf[t] <span class="ot">&lt;-</span> sales <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> cogs_pct) <span class="sc">-</span> delta_capex <span class="sc">-</span> delta_nwc</span>
<span id="cb11-34"><a></a>    }</span>
<span id="cb11-35"><a></a>    </span>
<span id="cb11-36"><a></a>    fcf_terminal <span class="ot">&lt;-</span> fcf[<span class="dv">5</span>] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> g[i])</span>
<span id="cb11-37"><a></a>    perp_value <span class="ot">&lt;-</span> fcf_terminal <span class="sc">/</span> (r[i] <span class="sc">-</span> g[i])</span>
<span id="cb11-38"><a></a>    </span>
<span id="cb11-39"><a></a>    discounted_fcf <span class="ot">&lt;-</span> <span class="fu">sum</span>(fcf <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r[i])<span class="sc">^</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb11-40"><a></a>    discounted_perp <span class="ot">&lt;-</span> perp_value <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r[i])<span class="sc">^</span><span class="dv">5</span></span>
<span id="cb11-41"><a></a>    </span>
<span id="cb11-42"><a></a>    firm_value[i] <span class="ot">&lt;-</span> discounted_fcf <span class="sc">+</span> discounted_perp</span>
<span id="cb11-43"><a></a>  }</span>
<span id="cb11-44"><a></a>  </span>
<span id="cb11-45"><a></a>  firm_value <span class="ot">&lt;-</span> firm_value[<span class="fu">is.finite</span>(firm_value) <span class="sc">&amp;</span> (r <span class="sc">&gt;</span> g)]</span>
<span id="cb11-46"><a></a>  </span>
<span id="cb11-47"><a></a>  <span class="fu">data.frame</span>(<span class="at">Value =</span> firm_value, <span class="at">Scenario =</span> label)</span>
<span id="cb11-48"><a></a>}</span>
<span id="cb11-49"><a></a></span>
<span id="cb11-50"><a></a><span class="co"># Normal distributions</span></span>
<span id="cb11-51"><a></a>r_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.08</span>, <span class="at">sd =</span> <span class="fl">0.01</span>)</span>
<span id="cb11-52"><a></a>g_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.03</span>, <span class="at">sd =</span> <span class="fl">0.005</span>)</span>
<span id="cb11-53"><a></a>df_norm <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="st">"Normal"</span>)</span>
<span id="cb11-54"><a></a></span>
<span id="cb11-55"><a></a>base_norm <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="st">"Normal"</span>)</span>
<span id="cb11-56"><a></a></span>
<span id="cb11-57"><a></a><span class="fu">ggplot</span>(base_norm, <span class="fu">aes</span>(<span class="at">x =</span> Value)) <span class="sc">+</span></span>
<span id="cb11-58"><a></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">60</span>, <span class="at">fill =</span> <span class="st">"#2c7fb8"</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb11-59"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> dollar) <span class="sc">+</span></span>
<span id="cb11-60"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb11-61"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Valuation Distribution Normal vs. Alternative Distributions"</span>,</span>
<span id="cb11-62"><a></a>    <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">'Based on {comma(n_sim)} simulations.'</span>),</span>
<span id="cb11-63"><a></a>    <span class="at">x =</span> <span class="st">"Firm Value"</span>,</span>
<span id="cb11-64"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span>,</span>
<span id="cb11-65"><a></a>    <span class="at">fill =</span> <span class="st">"Scenario"</span>,</span>
<span id="cb11-66"><a></a>    <span class="at">color =</span> <span class="st">"Scenario"</span></span>
<span id="cb11-67"><a></a>  ) <span class="sc">+</span></span>
<span id="cb11-68"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)<span class="sc">+</span></span>
<span id="cb11-69"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">'bottom'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-3">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-19-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="extension-1-alternative-distributions" class="slide level2">
<h2>Extension 1: Alternative Distributions</h2>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1">Outline</a></li><li><a href="#tabset-8-2">Code</a></li><li><a href="#tabset-8-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<ul>
<li><p><strong>Key Point:</strong> Monte Carlo doesnâ€™t assume normality â€” <span class="blue">any distribution</span> that fits the problem can be used!</p>
<ol type="1">
<li><p>While normal distributions are common, other distributions (<em>e.g.</em>, uniform, log-normal, etc.) can also be used:</p></li>
<li><p>For example, if <span class="math inline">\(r \sim \text{Uniform}(0.05, 0.10)\)</span>, the growth rate could be chosen randomly from a uniform distribution between <span class="math inline">\(5\%\)</span> and <span class="math inline">\(10\%\)</span></p></li>
</ol></li>
<li><p>Distributions like the <strong>log-normal</strong> may be more appropriate for modeling returns, as they respect the non-negativity constraint - $r $. Therefore, for a given variable <span class="math inline">\(X\)</span>, it could be sampled from any distribution</p></li>
<li><p>In what follows, weâ€™ll simulate results drawing from an <span class="blue">Uniform</span> distribution for <span class="math inline">\(r\)</span> and a <span class="blue">Beta</span> for <span class="math inline">\(g\)</span></p></li>
</ul>
</div>
<div id="tabset-8-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="co"># Baseline case</span></span>
<span id="cb12-2"><a></a>r_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.08</span>, <span class="at">sd =</span> <span class="fl">0.01</span>)</span>
<span id="cb12-3"><a></a>g_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.03</span>, <span class="at">sd =</span> <span class="fl">0.005</span>)</span>
<span id="cb12-4"><a></a>df_norm <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="st">"Normal"</span>)</span>
<span id="cb12-5"><a></a></span>
<span id="cb12-6"><a></a></span>
<span id="cb12-7"><a></a><span class="co"># Alternative distributions</span></span>
<span id="cb12-8"><a></a>r_unif <span class="ot">&lt;-</span> <span class="fu">runif</span>(n_sim, <span class="at">min =</span> <span class="fl">0.06</span>, <span class="at">max =</span> <span class="fl">0.10</span>)</span>
<span id="cb12-9"><a></a>g_beta <span class="ot">&lt;-</span> <span class="fl">0.06</span> <span class="sc">*</span> <span class="fu">rbeta</span>(n_sim, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb12-10"><a></a>df_alt <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_unif, g_beta, <span class="st">"Alternative"</span>)</span>
<span id="cb12-11"><a></a></span>
<span id="cb12-12"><a></a><span class="co"># Combine results</span></span>
<span id="cb12-13"><a></a>df_all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df_norm, df_alt)</span>
<span id="cb12-14"><a></a></span>
<span id="cb12-15"><a></a><span class="co"># Plot combined chart</span></span>
<span id="cb12-16"><a></a></span>
<span id="cb12-17"><a></a><span class="fu">ggplot</span>(df_all, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">fill =</span> Scenario, <span class="at">color =</span> Scenario)) <span class="sc">+</span></span>
<span id="cb12-18"><a></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-19"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> dollar) <span class="sc">+</span></span>
<span id="cb12-20"><a></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Normal"</span> <span class="ot">=</span> <span class="st">"#2c7fb8"</span>, <span class="st">"Alternative"</span> <span class="ot">=</span> <span class="st">"#f03b20"</span>)) <span class="sc">+</span></span>
<span id="cb12-21"><a></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Normal"</span> <span class="ot">=</span> <span class="st">"#2c7fb8"</span>, <span class="st">"Alternative"</span> <span class="ot">=</span> <span class="st">"#f03b20"</span>)) <span class="sc">+</span></span>
<span id="cb12-22"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb12-23"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Valuation Distribution Normal vs. Alternative Distributions"</span>,</span>
<span id="cb12-24"><a></a>    <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">'Based on {comma(n_sim)} simulations.'</span>),</span>
<span id="cb12-25"><a></a>    <span class="at">x =</span> <span class="st">"Firm Value"</span>,</span>
<span id="cb12-26"><a></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb12-27"><a></a>    <span class="at">fill =</span> <span class="st">"Scenario"</span>,</span>
<span id="cb12-28"><a></a>    <span class="at">color =</span> <span class="st">"Scenario"</span></span>
<span id="cb12-29"><a></a>  ) <span class="sc">+</span></span>
<span id="cb12-30"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)<span class="sc">+</span></span>
<span id="cb12-31"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">'bottom'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-3">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-21-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="extension-2-correlated-variables" class="slide level2">
<h2>Extension 2: Correlated Variables</h2>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1">Outline</a></li><li><a href="#tabset-9-2">Code</a></li><li><a href="#tabset-9-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<ul>
<li><p>In the baseline case, we have each random variable sampled <span class="blue">independently</span> from a normal distribution (<em>i.e</em>, <em>i.i.d</em> sampling). This can lead to higher variability and wider spread in the results that are unlikely to happen</p></li>
<li><p>By introducing a <span class="blue">correlation structure</span> between variables, we can constrain the possible outcomes, narrowing the distribution, leading to more <span class="blue">realistic</span> and <span class="blue">stable</span> simulations where changes in one variable influence the others</p></li>
<li><p>In what follows, we will keep <span class="math inline">\(r\)</span> and <span class="math inline">\(g\)</span> mean and standard deviation, but will now assume that the correlation between these two variables is <span class="math inline">\(\rho=0.9\)</span>:</p>
<ol type="1">
<li>Whenever <span class="math inline">\(g\)</span> is high, it might be because the firm is in its earlier stages, so <span class="math inline">\(r\)</span> should be higher</li>
<li>Whenever <span class="math inline">\(g\)</span> is low, firm may have reached its market peak, so <span class="math inline">\(r\)</span> should be lower</li>
</ol></li>
</ul>
</div>
<div id="tabset-9-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>r_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.08</span>, <span class="at">sd =</span> <span class="fl">0.01</span>)</span>
<span id="cb13-2"><a></a>g_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n_sim, <span class="at">mean =</span> <span class="fl">0.03</span>, <span class="at">sd =</span> <span class="fl">0.005</span>)</span>
<span id="cb13-3"><a></a>df_norm <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="st">"Uncorrelated"</span>)</span>
<span id="cb13-4"><a></a></span>
<span id="cb13-5"><a></a><span class="co"># Simulate r and g with negative correlation</span></span>
<span id="cb13-6"><a></a>mu_r <span class="ot">&lt;-</span> <span class="fl">0.08</span></span>
<span id="cb13-7"><a></a>mu_g <span class="ot">&lt;-</span> <span class="fl">0.03</span></span>
<span id="cb13-8"><a></a>sigma_r <span class="ot">&lt;-</span> <span class="fl">0.01</span></span>
<span id="cb13-9"><a></a>sigma_g <span class="ot">&lt;-</span> <span class="fl">0.005</span></span>
<span id="cb13-10"><a></a>corr_rg <span class="ot">&lt;-</span> <span class="fl">0.9</span></span>
<span id="cb13-11"><a></a></span>
<span id="cb13-12"><a></a><span class="co"># Covariance matrix</span></span>
<span id="cb13-13"><a></a>cov_matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(sigma_r<span class="sc">^</span><span class="dv">2</span>, corr_rg <span class="sc">*</span> sigma_r <span class="sc">*</span> sigma_g, corr_rg <span class="sc">*</span> sigma_r <span class="sc">*</span> sigma_g, sigma_g<span class="sc">^</span><span class="dv">2</span>), </span>
<span id="cb13-14"><a></a>                     <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb13-15"><a></a></span>
<span id="cb13-16"><a></a><span class="co"># Simulate r and g from the bivariate normal distribution</span></span>
<span id="cb13-17"><a></a>r_g_correlated <span class="ot">&lt;-</span> <span class="fu">mvrnorm</span>(n_sim, <span class="at">mu =</span> <span class="fu">c</span>(mu_r, mu_g), <span class="at">Sigma =</span> cov_matrix)</span>
<span id="cb13-18"><a></a>r_corr <span class="ot">&lt;-</span> r_g_correlated[, <span class="dv">1</span>]</span>
<span id="cb13-19"><a></a>g_corr <span class="ot">&lt;-</span> r_g_correlated[, <span class="dv">2</span>]</span>
<span id="cb13-20"><a></a>df_corr <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_corr, g_corr, <span class="st">"Correlated"</span>)</span>
<span id="cb13-21"><a></a></span>
<span id="cb13-22"><a></a><span class="co"># Combine results</span></span>
<span id="cb13-23"><a></a>df_all <span class="ot">&lt;-</span> <span class="fu">rbind</span>(df_norm, df_corr)</span>
<span id="cb13-24"><a></a></span>
<span id="cb13-25"><a></a><span class="fu">ggplot</span>(df_all, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">fill =</span> Scenario, <span class="at">color =</span> Scenario)) <span class="sc">+</span></span>
<span id="cb13-26"><a></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb13-27"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> dollar, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)) <span class="sc">+</span>  <span class="co"># Set x-axis limits</span></span>
<span id="cb13-28"><a></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Uncorrelated"</span> <span class="ot">=</span> <span class="st">"#2c7fb8"</span>, <span class="st">"Correlated"</span> <span class="ot">=</span> <span class="st">"#f03b20"</span>)) <span class="sc">+</span></span>
<span id="cb13-29"><a></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Uncorrelated"</span> <span class="ot">=</span> <span class="st">"#2c7fb8"</span>, <span class="st">"Correlated"</span> <span class="ot">=</span> <span class="st">"#f03b20"</span>)) <span class="sc">+</span></span>
<span id="cb13-30"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb13-31"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Valuation Distribution Uncorrelated vs. Strong Correlation"</span>,</span>
<span id="cb13-32"><a></a>    <span class="at">x =</span> <span class="st">"Firm Value"</span>,</span>
<span id="cb13-33"><a></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb13-34"><a></a>    <span class="at">fill =</span> <span class="st">"Scenario"</span>,</span>
<span id="cb13-35"><a></a>    <span class="at">color =</span> <span class="st">"Scenario"</span></span>
<span id="cb13-36"><a></a>  ) <span class="sc">+</span></span>
<span id="cb13-37"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>)<span class="sc">+</span></span>
<span id="cb13-38"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">'bottom'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-3">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-23-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="extension-3-varying-the-sample-size" class="slide level2">
<h2>Extension 3: Varying the Sample Size</h2>
<div class="panel-tabset">
<ul id="tabset-10" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-10-1">Outline</a></li><li><a href="#tabset-10-2">Code</a></li><li><a href="#tabset-10-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1">
<ul>
<li><p>In short, your Monte Carlo simulation outcome will depend on the number of simulations: the more simulations we run, the more stable and reliable the estimates become.</p>
<ol type="1">
<li><p>With smaller samples, (<em>e.g.</em>, <span class="math inline">\(n&lt;100\)</span> or <span class="math inline">\(n&lt;1,000\)</span>, results show high variability and may not capture the true distribution.</p></li>
<li><p>With larger samples, as <span class="math inline">\(n\)</span> (<em>e.g.</em>, <span class="math inline">\(100,000\)</span> or <span class="math inline">\(1,000,000\)</span>), the estimates converge toward the expected value</p></li>
</ol></li>
<li><p>All in all, increasing sample size reduces <span class="blue">random noise</span>, improving the <span class="blue">precision</span> and the <span class="blue">stability</span> of simulation results</p></li>
</ul>
</div>
<div id="tabset-10-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="co"># Simulation sizes</span></span>
<span id="cb14-2"><a></a>n_sim_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">1000</span>, <span class="dv">5000</span>, <span class="dv">10000</span>, <span class="dv">100000</span>, <span class="dv">1000000</span>)</span>
<span id="cb14-3"><a></a></span>
<span id="cb14-4"><a></a><span class="co"># Store all results</span></span>
<span id="cb14-5"><a></a>all_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb14-6"><a></a></span>
<span id="cb14-7"><a></a><span class="co"># Run simulations</span></span>
<span id="cb14-8"><a></a></span>
<span id="cb14-9"><a></a><span class="cf">for</span> (n <span class="cf">in</span> n_sim_values) {</span>
<span id="cb14-10"><a></a>  r_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="fl">0.08</span>, <span class="at">sd =</span> <span class="fl">0.01</span>)</span>
<span id="cb14-11"><a></a>  g_norm <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, <span class="at">mean =</span> <span class="fl">0.03</span>, <span class="at">sd =</span> <span class="fl">0.005</span>)</span>
<span id="cb14-12"><a></a>  </span>
<span id="cb14-13"><a></a>  df <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="fu">comma</span>(n))</span>
<span id="cb14-14"><a></a>  all_results <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_results, df)</span>
<span id="cb14-15"><a></a>}</span>
<span id="cb14-16"><a></a></span>
<span id="cb14-17"><a></a>all_results<span class="sc">$</span>Scenario <span class="ot">&lt;-</span><span class="fu">factor</span>(all_results<span class="sc">$</span>Scenario,<span class="at">levels=</span><span class="fu">comma</span>(n_sim_values))</span>
<span id="cb14-18"><a></a></span>
<span id="cb14-19"><a></a><span class="co"># Plot histograms overlaid in one chart</span></span>
<span id="cb14-20"><a></a><span class="fu">ggplot</span>(all_results, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">fill =</span> Scenario)) <span class="sc">+</span></span>
<span id="cb14-21"><a></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..),<span class="at">bins =</span> <span class="dv">60</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb14-22"><a></a>  <span class="fu">geom_density</span>(<span class="at">size=</span><span class="fl">0.5</span>,<span class="at">fill=</span><span class="cn">NA</span>)<span class="sc">+</span></span>
<span id="cb14-23"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar,<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">25000</span>)) <span class="sc">+</span></span>
<span id="cb14-24"><a></a>  <span class="fu">facet_wrap</span>(Scenario<span class="sc">~</span>.,<span class="at">scales=</span><span class="st">'free'</span>)<span class="sc">+</span></span>
<span id="cb14-25"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb14-26"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Valuation Distribution by Number of Simulations"</span>,</span>
<span id="cb14-27"><a></a>    <span class="at">subtitle =</span> <span class="st">"Varying the sample size for draws"</span>,</span>
<span id="cb14-28"><a></a>    <span class="at">x =</span> <span class="st">"Firm Value"</span>,</span>
<span id="cb14-29"><a></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb14-30"><a></a>    <span class="at">fill =</span> <span class="st">"Simulation Size"</span></span>
<span id="cb14-31"><a></a>  ) <span class="sc">+</span></span>
<span id="cb14-32"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb14-33"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-3">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-25-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="extension-4-bootstrapping" class="slide level2">
<h2>Extension 4: Bootstrapping</h2>
<div class="panel-tabset">
<ul id="tabset-11" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-11-1">Outline</a></li><li><a href="#tabset-11-2">Code</a></li><li><a href="#tabset-11-3">Output</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1">
<ul>
<li><p><span class="blue">Bootstrapping</span> is a <em>resampling technique</em> that draws samples <em>with replacement</em> from observed data</p>
<ol type="1">
<li>It is useful to incorporate <span class="blue">empirical variability</span> without assuming a specific parametric distribution</li>
<li>Helps capture the uncertainty present in historical or observed data</li>
</ol></li>
<li><p>Given a sample <span class="math inline">\(x_1, x_2, \dots, x_N\)</span>, draw <span class="math inline">\(B\)</span> bootstrap samples, you draw a given number of samples with replacement and compute the statistic of interest (<em>e.g.</em>, mean, median) on each bootstrap sample</p></li>
<li><p>Bootstrapping can be used, for example, if we have a very limited series of historical values for our random values (<em>e.g</em>, <span class="math inline">\(n=20\)</span>) but want to incorporate variability into the analysis</p></li>
</ul>
</div>
<div id="tabset-11-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="co">#Number of simulations</span></span>
<span id="cb15-2"><a></a>n_sim<span class="ot">=</span><span class="dv">10000</span></span>
<span id="cb15-3"><a></a></span>
<span id="cb15-4"><a></a><span class="co"># Historical series</span></span>
<span id="cb15-5"><a></a>historical_cogs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.58</span>, <span class="fl">0.6</span>, <span class="fl">0.62</span>, <span class="fl">0.59</span>, <span class="fl">0.61</span>,<span class="fl">0.75</span>,<span class="fl">0.54</span>,<span class="fl">0.66</span>,<span class="fl">0.29</span>,<span class="fl">0.78</span>)</span>
<span id="cb15-6"><a></a>historical_capex <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.48</span>, <span class="fl">0.5</span>, <span class="fl">0.52</span>, <span class="fl">0.49</span>, <span class="fl">0.51</span>,<span class="fl">0.40</span>,<span class="fl">0.52</span>,<span class="fl">0.59</span>,<span class="fl">0.58</span>,<span class="fl">0.81</span>)</span>
<span id="cb15-7"><a></a></span>
<span id="cb15-8"><a></a><span class="co"># For each simulation, bootstrap 10 values and take the mean â†’ length n_sim vector</span></span>
<span id="cb15-9"><a></a>boot_cogs_pct <span class="ot">&lt;-</span> <span class="fu">replicate</span>(n_sim, <span class="fu">mean</span>(<span class="fu">sample</span>(historical_cogs, <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb15-10"><a></a>boot_capex_pct <span class="ot">&lt;-</span> <span class="fu">replicate</span>(n_sim, <span class="fu">mean</span>(<span class="fu">sample</span>(historical_capex, <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb15-11"><a></a></span>
<span id="cb15-12"><a></a>simulate_values <span class="ot">&lt;-</span> <span class="cf">function</span>(r, g, cogs_pct, capex_pct, <span class="at">label =</span> <span class="st">'Simulation'</span>) {</span>
<span id="cb15-13"><a></a>  firm_value <span class="ot">&lt;-</span> <span class="fu">numeric</span>(n_sim)</span>
<span id="cb15-14"><a></a>  </span>
<span id="cb15-15"><a></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sim) {</span>
<span id="cb15-16"><a></a>    sales <span class="ot">&lt;-</span> initial_sales</span>
<span id="cb15-17"><a></a>    nwc_last <span class="ot">&lt;-</span> sales <span class="sc">*</span> nwc_pct</span>
<span id="cb15-18"><a></a>    fa_last <span class="ot">&lt;-</span> sales <span class="sc">*</span> capex_pct[i]</span>
<span id="cb15-19"><a></a>    fcf <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">5</span>)</span>
<span id="cb15-20"><a></a>    </span>
<span id="cb15-21"><a></a>    <span class="cf">for</span> (t <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb15-22"><a></a>      sales <span class="ot">&lt;-</span> sales <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> g[i])</span>
<span id="cb15-23"><a></a>      nwc_current <span class="ot">&lt;-</span> sales <span class="sc">*</span> nwc_pct</span>
<span id="cb15-24"><a></a>      fa_current <span class="ot">&lt;-</span> sales <span class="sc">*</span> capex_pct[i]</span>
<span id="cb15-25"><a></a>      </span>
<span id="cb15-26"><a></a>      delta_nwc <span class="ot">&lt;-</span> nwc_current <span class="sc">-</span> nwc_last</span>
<span id="cb15-27"><a></a>      delta_capex <span class="ot">&lt;-</span> fa_current <span class="sc">-</span> fa_last</span>
<span id="cb15-28"><a></a>      </span>
<span id="cb15-29"><a></a>      nwc_last <span class="ot">&lt;-</span> nwc_current</span>
<span id="cb15-30"><a></a>      fa_last <span class="ot">&lt;-</span> fa_current</span>
<span id="cb15-31"><a></a>      </span>
<span id="cb15-32"><a></a>      fcf[t] <span class="ot">&lt;-</span> sales <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> cogs_pct[i]) <span class="sc">-</span> delta_capex <span class="sc">-</span> delta_nwc</span>
<span id="cb15-33"><a></a>    }</span>
<span id="cb15-34"><a></a>    </span>
<span id="cb15-35"><a></a>    fcf_terminal <span class="ot">&lt;-</span> fcf[<span class="dv">5</span>] <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> g[i])</span>
<span id="cb15-36"><a></a>    perp_value <span class="ot">&lt;-</span> fcf_terminal <span class="sc">/</span> (r[i] <span class="sc">-</span> g[i])</span>
<span id="cb15-37"><a></a>    </span>
<span id="cb15-38"><a></a>    discounted_fcf <span class="ot">&lt;-</span> <span class="fu">sum</span>(fcf <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r[i])<span class="sc">^</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb15-39"><a></a>    discounted_perp <span class="ot">&lt;-</span> perp_value <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r[i])<span class="sc">^</span><span class="dv">5</span></span>
<span id="cb15-40"><a></a>    </span>
<span id="cb15-41"><a></a>    firm_value[i] <span class="ot">&lt;-</span> discounted_fcf <span class="sc">+</span> discounted_perp</span>
<span id="cb15-42"><a></a>  }</span>
<span id="cb15-43"><a></a>  </span>
<span id="cb15-44"><a></a>  firm_value <span class="ot">&lt;-</span> firm_value[<span class="fu">is.finite</span>(firm_value) <span class="sc">&amp;</span> (r <span class="sc">&gt;</span> g)]</span>
<span id="cb15-45"><a></a>  </span>
<span id="cb15-46"><a></a>  <span class="fu">data.frame</span>(<span class="at">Value =</span> firm_value, <span class="at">Scenario =</span> label)</span>
<span id="cb15-47"><a></a>}</span>
<span id="cb15-48"><a></a></span>
<span id="cb15-49"><a></a></span>
<span id="cb15-50"><a></a><span class="co"># Normal scenario (fixed percentages for COGS and CAPEX)</span></span>
<span id="cb15-51"><a></a>df_norm <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="at">cogs_pct =</span> <span class="fu">rep</span>(<span class="fl">0.6</span>,n_sim), <span class="at">capex_pct =</span> <span class="fu">rep</span>(<span class="fl">0.5</span>,n_sim), <span class="at">label =</span> <span class="st">"Normal"</span>)</span>
<span id="cb15-52"><a></a></span>
<span id="cb15-53"><a></a><span class="co"># Bootstrap scenario (bootstrapped mean percentages)</span></span>
<span id="cb15-54"><a></a>df_bootstrap <span class="ot">&lt;-</span> <span class="fu">simulate_values</span>(r_norm, g_norm, <span class="at">cogs_pct =</span> boot_cogs_pct, <span class="at">capex_pct =</span> boot_capex_pct, <span class="at">label =</span> <span class="st">"Bootstrap"</span>)</span>
<span id="cb15-55"><a></a></span>
<span id="cb15-56"><a></a><span class="co">#Plot</span></span>
<span id="cb15-57"><a></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb15-58"><a></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> df_norm, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">fill =</span> <span class="st">"Normal"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-59"><a></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> df_bootstrap, <span class="fu">aes</span>(<span class="at">x =</span> Value, <span class="at">fill =</span> <span class="st">"Bootstrap"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-60"><a></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> dollar)<span class="sc">+</span></span>
<span id="cb15-61"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb15-62"><a></a>    <span class="at">title =</span> <span class="st">"Monte Carlo Valuation Distribution: Normal vs. Bootstrap"</span>,</span>
<span id="cb15-63"><a></a>    <span class="at">x =</span> <span class="st">"Firm Value"</span>,</span>
<span id="cb15-64"><a></a>    <span class="at">y =</span> <span class="st">"Frequency"</span>,</span>
<span id="cb15-65"><a></a>    <span class="at">fill =</span> <span class="st">'Approach'</span>,</span>
<span id="cb15-66"><a></a>    <span class="at">color =</span> <span class="st">"Scenario"</span></span>
<span id="cb15-67"><a></a>  ) <span class="sc">+</span></span>
<span id="cb15-68"><a></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb15-69"><a></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-3">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="index_files/figure-revealjs/unnamed-chunk-27-1.png" width="1536"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>

<div class="quarto-auto-generated-content">
<p><img src="Images/logo.jpg" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://lsmacoris.github.io/">@ Website</a> | <a href="https://lsmacoris.github.io/lectures/quant-fin">@ Slides</a> | <a href="https://calendly.com/lucas-macoris-fgv/appointment-lsm">@ Office-hour appointments</a></p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-tidyfinance" class="csl-entry" role="listitem">
Scheuch, Christoph, Stefan Voigt, and Patrick Weiss. 2023. <em>Tidy Finance with <span>R</span></em>. Chapman &amp; Hall/CRC. <a href="https://www.tidy-finance.org/r/">https://www.tidy-finance.org/r/</a>.
</div>
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Cetinkaya-Rundel, and Garrett Grolemund. 2023. <em><span>R</span> for Data Science</em>. Oâ€™Reilly Media. <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/lsmacoris\.github\.io\/lectures");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>